<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ModMed ROI Calculator | Sandler Discovery Tool</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0f0f12;
            --bg-secondary: #18181d;
            --bg-card: #1e1e25;
            --bg-card-hover: #252530;
            --border: #2a2a35;
            --text-primary: #f0f0f5;
            --text-secondary: #9090a0;
            --text-muted: #606070;
            --accent: #6366f1;
            --accent-light: #818cf8;
            --pain-red: #ef4444;
            --pain-red-soft: #7f1d1d;
            --gain-green: #22c55e;
            --gain-green-soft: #14532d;
            --warning: #f59e0b;
            --radius: 12px;
            --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.5;
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(15, 15, 18, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 16px 24px;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .logo {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .specialty-tabs {
            display: flex;
            gap: 8px;
            background: var(--bg-secondary);
            padding: 4px;
            border-radius: 10px;
        }

        .specialty-tab {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            background: transparent;
            color: var(--text-secondary);
        }

        .specialty-tab.active {
            background: var(--accent);
            color: white;
        }

        .specialty-tab:hover:not(.active) {
            background: var(--bg-card);
        }

        .header-actions {
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-secondary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--bg-card-hover);
            color: var(--text-primary);
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-light);
        }

        /* Main Layout */
        .main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 24px;
        }

        @media (max-width: 1024px) {
            .main {
                grid-template-columns: 1fr;
            }
            .sidebar {
                position: static !important;
                order: -1;
            }
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            overflow: hidden;
            margin-bottom: 16px;
        }

        .card-header {
            padding: 16px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid transparent;
            transition: var(--transition);
            user-select: none;
        }

        .card-header:hover {
            background: var(--bg-card-hover);
        }

        .card.expanded .card-header {
            border-bottom-color: var(--border);
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .card-title h3 {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .card-title p {
            font-size: 13px;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .card-meta {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 16px;
            font-weight: 600;
        }

        .card-value.pain {
            color: var(--pain-red);
        }

        .card-value.gain {
            color: var(--gain-green);
        }

        .chevron {
            width: 20px;
            height: 20px;
            color: var(--text-muted);
            transition: transform var(--transition);
        }

        .card.expanded .chevron {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .card.expanded .card-content {
            max-height: 2000px;
        }

        .card-body {
            padding: 20px;
        }

        /* Form Elements */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .form-label {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .form-hint {
            font-size: 11px;
            color: var(--text-muted);
            font-style: italic;
        }

        .form-input {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 10px 14px;
            font-size: 14px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            transition: var(--transition);
            width: 100%;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        select.form-input {
            cursor: pointer;
            font-family: 'DM Sans', sans-serif;
        }

        /* Pain Items */
        .pain-item {
            padding: 16px 0;
            border-bottom: 1px solid var(--border);
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 16px;
            align-items: start;
        }

        .pain-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .pain-item:first-child {
            padding-top: 0;
        }

        .pain-info h4 {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .pain-info p {
            font-size: 13px;
            color: var(--text-muted);
        }

        .pain-inputs {
            display: flex;
            gap: 12px;
            align-items: end;
            flex-wrap: wrap;
        }

        .pain-field {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .pain-field label {
            font-size: 11px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .pain-field input {
            width: 90px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px 10px;
            font-size: 14px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            text-align: right;
        }

        .pain-field input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .pain-cost {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 2px;
            min-width: 100px;
        }

        .pain-cost-label {
            font-size: 11px;
            color: var(--text-muted);
        }

        .pain-cost-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 16px;
            font-weight: 600;
            color: var(--pain-red);
        }

        /* Sidebar */
        .sidebar {
            position: sticky;
            top: 90px;
            height: fit-content;
        }

        /* Sandler Pain Box */
        .pain-box {
            background: linear-gradient(135deg, var(--pain-red-soft), #450a0a);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: var(--radius);
            padding: 24px;
            margin-bottom: 16px;
            text-align: center;
        }

        .pain-box-label {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #fca5a5;
            margin-bottom: 8px;
        }

        .pain-box-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 42px;
            font-weight: 700;
            color: #fef2f2;
            line-height: 1;
            margin-bottom: 4px;
        }

        .pain-box-sub {
            font-size: 14px;
            color: #fca5a5;
        }

        .pain-breakdown {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(239, 68, 68, 0.2);
        }

        .pain-breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 13px;
        }

        .pain-breakdown-item span:first-child {
            color: #fecaca;
        }

        .pain-breakdown-item span:last-child {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 500;
            color: #fef2f2;
        }

        .pain-3year {
            margin-top: 16px;
            padding: 16px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            text-align: center;
        }

        .pain-3year-label {
            font-size: 12px;
            color: #fca5a5;
            margin-bottom: 4px;
        }

        .pain-3year-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 24px;
            font-weight: 700;
            color: #fef2f2;
        }

        /* ROI Box */
        .roi-box {
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            border-radius: var(--radius);
            padding: 24px;
            text-align: center;
            margin-bottom: 16px;
        }

        .roi-label {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 8px;
        }

        .roi-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 48px;
            font-weight: 700;
            color: white;
            line-height: 1;
        }

        .roi-payback {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 8px;
        }

        /* Savings Card */
        .savings-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
            margin-bottom: 16px;
        }

        .savings-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border);
        }

        .savings-header h3 {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .savings-body {
            padding: 16px 20px;
        }

        .savings-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 13px;
        }

        .savings-item span:first-child {
            color: var(--text-secondary);
        }

        .savings-item span:last-child {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 500;
        }

        .savings-item span.green {
            color: var(--gain-green);
        }

        .savings-item span.blue {
            color: var(--accent-light);
        }

        .savings-divider {
            height: 1px;
            background: var(--border);
            margin: 8px 0;
        }

        .savings-total {
            font-weight: 600;
        }

        .savings-total span:first-child {
            color: var(--text-primary);
        }

        /* Net Benefit */
        .net-card {
            background: var(--gain-green-soft);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: var(--radius);
            padding: 20px;
        }

        .net-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 14px;
        }

        .net-item span:first-child {
            color: #86efac;
        }

        .net-item span:last-child {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            color: #f0fdf4;
        }

        .net-item.highlight {
            font-size: 18px;
            padding: 12px 0;
        }

        /* Staff Table */
        .staff-table {
            width: 100%;
            font-size: 13px;
        }

        .staff-table th {
            text-align: left;
            padding: 8px 12px;
            font-weight: 500;
            color: var(--text-muted);
            border-bottom: 1px solid var(--border);
        }

        .staff-table td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--border);
        }

        .staff-table tr:last-child td {
            border-bottom: none;
        }

        .staff-table input {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 6px 8px;
            font-size: 13px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            width: 70px;
            text-align: right;
        }

        .staff-table input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .staff-table .role-input {
            width: 140px;
            text-align: left;
            font-family: 'DM Sans', sans-serif;
        }

        .staff-total {
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Improvement Sliders */
        .improvement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 12px;
        }

        .improvement-item {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .improvement-info h4 {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .improvement-info p {
            font-size: 11px;
            color: var(--text-muted);
        }

        .improvement-input {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .improvement-input input {
            width: 60px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 6px 8px;
            font-size: 13px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            text-align: right;
        }

        .improvement-input span {
            color: var(--text-muted);
            font-size: 13px;
        }

        /* Revenue Summary */
        .revenue-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 16px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .revenue-stat {
            text-align: center;
        }

        .revenue-stat-label {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .revenue-stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .revenue-stat-value.accent {
            color: var(--accent-light);
        }

        /* Card icon colors */
        .icon-profile { background: rgba(99, 102, 241, 0.15); }
        .icon-staff { background: rgba(168, 85, 247, 0.15); }
        .icon-revenue { background: rgba(34, 197, 94, 0.15); }
        .icon-clinical { background: rgba(239, 68, 68, 0.15); }
        .icon-billing { background: rgba(245, 158, 11, 0.15); }
        .icon-patient { background: rgba(59, 130, 246, 0.15); }
        .icon-compliance { background: rgba(236, 72, 153, 0.15); }
        .icon-invest { background: rgba(99, 102, 241, 0.15); }
        .icon-improve { background: rgba(34, 197, 94, 0.15); }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: stretch;
            }
            .specialty-tabs {
                justify-content: center;
            }
            .header-actions {
                justify-content: center;
            }
            .main {
                padding: 16px;
            }
            .pain-item {
                grid-template-columns: 1fr;
            }
            .pain-inputs {
                margin-top: 12px;
            }
            .revenue-summary {
                grid-template-columns: 1fr;
            }
            .form-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Print */
        @media print {
            .header, .btn { display: none; }
            .main { grid-template-columns: 1fr; }
            .sidebar { position: static; }
            .card { break-inside: avoid; }
        }

        /* Sandler Guide */
        .sandler-guide {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 16px 20px;
            margin-bottom: 24px;
        }

        .sandler-guide h2 {
            font-size: 14px;
            font-weight: 600;
            color: var(--accent-light);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sandler-guide p {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .step-indicator {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .step {
            flex: 1;
            padding: 8px 12px;
            background: var(--bg-card);
            border-radius: 6px;
            font-size: 12px;
            color: var(--text-muted);
            text-align: center;
        }

        .step.active {
            background: var(--accent);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">üìä</div>
                <span>ModMed ROI Calculator</span>
            </div>
            
            <div class="specialty-tabs">
                <button class="specialty-tab active" onclick="switchSpecialty('plastic')" id="tab-plastic">
                    Plastic Surgery
                </button>
                <button class="specialty-tab" onclick="switchSpecialty('allergy')" id="tab-allergy">
                    Allergy
                </button>
            </div>
            
            <div class="header-actions">
                <button class="btn btn-secondary" onclick="resetAll()">
                    ‚Ü∫ Reset
                </button>
                <button class="btn btn-primary" onclick="copySummary()">
                    üìã Copy Summary
                </button>
            </div>
        </div>
    </header>

    <main class="main">
        <!-- Left Column: Discovery Flow -->
        <div class="discovery-column">
            
            <!-- Sandler Guide -->
            <div class="sandler-guide">
                <h2>üéØ Sandler Pain Funnel Discovery</h2>
                <p>Work through each section chronologically. Start with basics, uncover pain points, quantify the cost, then present the solution. Let the numbers tell the story.</p>
                <div class="step-indicator">
                    <div class="step active">1. Profile</div>
                    <div class="step">2. Pain Points</div>
                    <div class="step">3. Investment</div>
                    <div class="step">4. ROI</div>
                </div>
            </div>

            <!-- STEP 1: Practice Profile -->
            <div class="card expanded" id="card-profile">
                <div class="card-header" onclick="toggleCard('profile')">
                    <div class="card-title">
                        <div class="card-icon icon-profile">üè•</div>
                        <div>
                            <h3>Practice Profile</h3>
                            <p>Who are we talking to?</p>
                        </div>
                    </div>
                    <div class="card-meta">
                        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Practice Name</label>
                                <input type="text" id="practiceName" class="form-input" placeholder="Enter practice name..." oninput="calculate()">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current EHR System</label>
                                <select id="currentEHR" class="form-input" onchange="calculate()">
                                    <option value="paper">Paper / Manual</option>
                                    <option value="legacy">Legacy / Outdated EHR</option>
                                    <option value="generic">Generic EHR (Epic, Cerner)</option>
                                    <option value="competitor">Competitor Specialty EHR</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Working Days/Month</label>
                                <input type="number" id="workDays" class="form-input" value="20" oninput="calculate()">
                                <span class="form-hint">Standard: 20 days</span>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Hours/Day</label>
                                <input type="number" id="hoursPerDay" class="form-input" value="9" oninput="calculate()">
                                <span class="form-hint">Standard: 8-10 hours</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Staff Configuration -->
            <div class="card" id="card-staff">
                <div class="card-header" onclick="toggleCard('staff')">
                    <div class="card-title">
                        <div class="card-icon icon-staff">üë•</div>
                        <div>
                            <h3>Staff Configuration</h3>
                            <p>Roles, headcount, and costs</p>
                        </div>
                    </div>
                    <div class="card-meta">
                        <span class="card-value" id="totalStaffDisplay">0 staff</span>
                        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <table class="staff-table">
                            <thead>
                                <tr>
                                    <th>Role</th>
                                    <th>Count</th>
                                    <th>$/Hour</th>
                                    <th>Annual</th>
                                </tr>
                            </thead>
                            <tbody id="staffTable"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Patient Volume & Revenue -->
            <div class="card" id="card-volume">
                <div class="card-header" onclick="toggleCard('volume')">
                    <div class="card-title">
                        <div class="card-icon icon-revenue">üíµ</div>
                        <div>
                            <h3>Patient Volume & Revenue</h3>
                            <p>How busy are they?</p>
                        </div>
                    </div>
                    <div class="card-meta">
                        <span class="card-value" id="annualRevenueDisplay">$0</span>
                        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Patients/Provider/Day</label>
                                <input type="number" id="patientsPerDay" class="form-input" value="20" oninput="calculate()">
                                <span class="form-hint" id="patientHint">Plastic: 15-25</span>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Avg Revenue/Visit</label>
                                <input type="number" id="revenuePerVisit" class="form-input" value="350" oninput="calculate()">
                                <span class="form-hint" id="revenueHint">Plastic: $300-500</span>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Procedures/Month</label>
                                <input type="number" id="proceduresPerMonth" class="form-input" value="40" oninput="calculate()">
                                <span class="form-hint">Major procedures only</span>
                            </div>
                        </div>
                        <div class="revenue-summary">
                            <div class="revenue-stat">
                                <div class="revenue-stat-label">Annual Visits</div>
                                <div class="revenue-stat-value" id="annualVisits">0</div>
                            </div>
                            <div class="revenue-stat">
                                <div class="revenue-stat-label">Est. Annual Revenue</div>
                                <div class="revenue-stat-value accent" id="annualRevenue">$0</div>
                            </div>
                            <div class="revenue-stat">
                                <div class="revenue-stat-label">Revenue/Provider</div>
                                <div class="revenue-stat-value" id="revenuePerProvider">$0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- STEP 2: Pain Points -->
            
            <!-- Clinical Workflow Pain -->
            <div class="card" id="card-clinical">
                <div class="card-header" onclick="toggleCard('clinical')">
                    <div class="card-title">
                        <div class="card-icon icon-clinical">ü©∫</div>
                        <div>
                            <h3>Clinical Workflow Pain</h3>
                            <p>Provider & clinical staff efficiency</p>
                        </div>
                    </div>
                    <div class="card-meta">
                        <span class="card-value pain" id="clinicalTotal">$0</span>
                        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <!-- Charting -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>After-Hours Charting</h4>
                                <p>Time providers spend documenting outside patient hours ‚Ä¢ Avg: 1-2 hrs/day</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>Hrs/Day</label>
                                    <input type="number" id="chartingHours" value="1" step="0.5" oninput="calculate()">
                                </div>
                                <div class="pain-field">
                                    <label>$/Hour</label>
                                    <input type="number" id="chartingRate" value="200" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Annual</span>
                                    <span class="pain-cost-value" id="chartingCost">$0</span>
                                </div>
                            </div>
                        </div>
                        <!-- Lookup -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>Patient Info Lookup</h4>
                                <p>Searching for charts, history, test results ‚Ä¢ Avg: 5-15 min/patient</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>Min/Pt</label>
                                    <input type="number" id="lookupMinutes" value="8" oninput="calculate()">
                                </div>
                                <div class="pain-field">
                                    <label>$/Hour</label>
                                    <input type="number" id="lookupRate" value="75" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Annual</span>
                                    <span class="pain-cost-value" id="lookupCost">$0</span>
                                </div>
                            </div>
                        </div>
                        <!-- Prior Auth -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>Prior Authorizations</h4>
                                <p>Time on PA requests and follow-ups ‚Ä¢ Avg: 45 min/PA</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>PAs/Wk</label>
                                    <input type="number" id="priorAuthsPerWeek" value="15" oninput="calculate()">
                                </div>
                                <div class="pain-field">
                                    <label>Min/PA</label>
                                    <input type="number" id="priorAuthMinutes" value="45" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Annual</span>
                                    <span class="pain-cost-value" id="priorAuthCost">$0</span>
                                </div>
                            </div>
                        </div>
                        <!-- Rx -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>Prescription Management</h4>
                                <p>Rx renewals, pharmacy calls, e-prescribing ‚Ä¢ Avg: 30-60 min/day</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>Min/Day</label>
                                    <input type="number" id="rxMinutes" value="45" oninput="calculate()">
                                </div>
                                <div class="pain-field">
                                    <label>$/Hour</label>
                                    <input type="number" id="rxRate" value="50" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Annual</span>
                                    <span class="pain-cost-value" id="rxCost">$0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Revenue Cycle Pain -->
            <div class="card" id="card-billing">
                <div class="card-header" onclick="toggleCard('billing')">
                    <div class="card-title">
                        <div class="card-icon icon-billing">üí∞</div>
                        <div>
                            <h3>Revenue Cycle Pain</h3>
                            <p>Billing, coding, collections, denials</p>
                        </div>
                    </div>
                    <div class="card-meta">
                        <span class="card-value pain" id="billingTotal">$0</span>
                        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <!-- Denials -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>Claim Denial Rate</h4>
                                <p>First-pass denial percentage ‚Ä¢ Industry avg: 5-10%</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>Denial %</label>
                                    <input type="number" id="denialRate" value="8" oninput="calculate()">
                                </div>
                                <div class="pain-field">
                                    <label>Rework $</label>
                                    <input type="number" id="reworkCost" value="35" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Annual</span>
                                    <span class="pain-cost-value" id="denialCost">$0</span>
                                </div>
                            </div>
                        </div>
                        <!-- Collection -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>Collection Rate Gap</h4>
                                <p>Current rate vs target 95% ‚Ä¢ Best practice: 95%+</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>Current %</label>
                                    <input type="number" id="collectionRate" value="92" oninput="calculate()">
                                </div>
                                <div class="pain-field">
                                    <label>Target %</label>
                                    <input type="number" id="collectionTarget" value="95" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Lost Rev</span>
                                    <span class="pain-cost-value" id="collectionCost">$0</span>
                                </div>
                            </div>
                        </div>
                        <!-- Days A/R -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>Days in A/R</h4>
                                <p>Average days to collect ‚Ä¢ Best practice: &lt;35 days</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>Current</label>
                                    <input type="number" id="daysAR" value="45" oninput="calculate()">
                                </div>
                                <div class="pain-field">
                                    <label>Target</label>
                                    <input type="number" id="daysARTarget" value="35" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Cash Impact</span>
                                    <span class="pain-cost-value" id="arCost">$0</span>
                                </div>
                            </div>
                        </div>
                        <!-- Missed Charges -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>Missed Charges</h4>
                                <p>Unbilled services, supplies, procedures ‚Ä¢ Avg: 1-5% of revenue</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>% Rev</label>
                                    <input type="number" id="missedChargeRate" value="2" step="0.5" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Lost Rev</span>
                                    <span class="pain-cost-value" id="missedChargeCost">$0</span>
                                </div>
                            </div>
                        </div>
                        <!-- Billing Staff -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>Manual Billing Work</h4>
                                <p>Data entry, claim scrubbing, posting</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>Hrs/Wk</label>
                                    <input type="number" id="billingHours" value="15" oninput="calculate()">
                                </div>
                                <div class="pain-field">
                                    <label>$/Hour</label>
                                    <input type="number" id="billingRate" value="25" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Annual</span>
                                    <span class="pain-cost-value" id="billingLaborCost">$0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Patient Flow Pain -->
            <div class="card" id="card-patient">
                <div class="card-header" onclick="toggleCard('patient')">
                    <div class="card-title">
                        <div class="card-icon icon-patient">üìÖ</div>
                        <div>
                            <h3>Patient Flow Pain</h3>
                            <p>Scheduling, no-shows, experience</p>
                        </div>
                    </div>
                    <div class="card-meta">
                        <span class="card-value pain" id="patientTotal">$0</span>
                        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <!-- No-Shows -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>No-Show Rate</h4>
                                <p>Missed appointments = lost revenue ‚Ä¢ Avg: 10-15%</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>No-Show %</label>
                                    <input type="number" id="noShowRate" value="12" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Lost Rev</span>
                                    <span class="pain-cost-value" id="noShowCost">$0</span>
                                </div>
                            </div>
                        </div>
                        <!-- Check-in -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>Check-in/Check-out</h4>
                                <p>Front desk time per patient ‚Ä¢ Avg: 5-10 min</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>Min/Pt</label>
                                    <input type="number" id="checkinMinutes" value="8" oninput="calculate()">
                                </div>
                                <div class="pain-field">
                                    <label>$/Hour</label>
                                    <input type="number" id="checkinRate" value="20" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Annual</span>
                                    <span class="pain-cost-value" id="checkinCost">$0</span>
                                </div>
                            </div>
                        </div>
                        <!-- Phone -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>Phone Call Volume</h4>
                                <p>Scheduling, questions, results, refills ‚Ä¢ Avg: 3-5 min/call</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>Calls/Day</label>
                                    <input type="number" id="callsPerDay" value="50" oninput="calculate()">
                                </div>
                                <div class="pain-field">
                                    <label>Min/Call</label>
                                    <input type="number" id="callMinutes" value="4" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Annual</span>
                                    <span class="pain-cost-value" id="phoneCost">$0</span>
                                </div>
                            </div>
                        </div>
                        <!-- Insurance Verification -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>Insurance Verification</h4>
                                <p>Manual eligibility checks ‚Ä¢ Avg: 5-10 min/patient</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>Min/Pt</label>
                                    <input type="number" id="insuranceMinutes" value="7" oninput="calculate()">
                                </div>
                                <div class="pain-field">
                                    <label>% Checked</label>
                                    <input type="number" id="insurancePercent" value="80" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Annual</span>
                                    <span class="pain-cost-value" id="insuranceCost">$0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Compliance & Ops Pain -->
            <div class="card" id="card-compliance">
                <div class="card-header" onclick="toggleCard('compliance')">
                    <div class="card-title">
                        <div class="card-icon icon-compliance">‚öñÔ∏è</div>
                        <div>
                            <h3>Compliance & Operations</h3>
                            <p>MIPS, IT costs, training, risk</p>
                        </div>
                    </div>
                    <div class="card-meta">
                        <span class="card-value pain" id="complianceTotal">$0</span>
                        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <!-- MIPS -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>MIPS/MACRA Impact</h4>
                                <p>Penalty avoidance or bonus opportunity ‚Ä¢ -9% to +9%</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>Current</label>
                                    <select id="mipsStatus" class="form-input" style="width:90px;padding:8px" onchange="calculate()">
                                        <option value="-9">-9%</option>
                                        <option value="-5">-5%</option>
                                        <option value="0" selected>0%</option>
                                        <option value="3">+3%</option>
                                        <option value="6">+6%</option>
                                    </select>
                                </div>
                                <div class="pain-field">
                                    <label>Target</label>
                                    <select id="mipsTarget" class="form-input" style="width:90px;padding:8px" onchange="calculate()">
                                        <option value="0">0%</option>
                                        <option value="3" selected>+3%</option>
                                        <option value="6">+6%</option>
                                        <option value="9">+9%</option>
                                    </select>
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Opportunity</span>
                                    <span class="pain-cost-value" id="mipsCost">$0</span>
                                </div>
                            </div>
                        </div>
                        <!-- IT -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>IT Support & Maintenance</h4>
                                <p>Current system support costs</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>$/Month</label>
                                    <input type="number" id="itMonthlyCost" value="500" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Annual</span>
                                    <span class="pain-cost-value" id="itCost">$0</span>
                                </div>
                            </div>
                        </div>
                        <!-- Training -->
                        <div class="pain-item">
                            <div class="pain-info">
                                <h4>Staff Turnover Training</h4>
                                <p>Cost to train new hires ‚Ä¢ Avg: 20-40 hrs/hire</p>
                            </div>
                            <div class="pain-inputs">
                                <div class="pain-field">
                                    <label>Hires/Yr</label>
                                    <input type="number" id="newHires" value="2" oninput="calculate()">
                                </div>
                                <div class="pain-field">
                                    <label>Train Hrs</label>
                                    <input type="number" id="trainingHours" value="30" oninput="calculate()">
                                </div>
                                <div class="pain-cost">
                                    <span class="pain-cost-label">Annual</span>
                                    <span class="pain-cost-value" id="trainingCost">$0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- STEP 3: ModMed Investment -->
            <div class="card" id="card-invest">
                <div class="card-header" onclick="toggleCard('invest')">
                    <div class="card-title">
                        <div class="card-icon icon-invest">üíº</div>
                        <div>
                            <h3>ModMed Investment</h3>
                            <p>Pricing and implementation</p>
                        </div>
                    </div>
                    <div class="card-meta">
                        <span class="card-value" id="year1InvestDisplay">$0</span>
                        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Per Provider/Month</label>
                                <input type="number" id="modmedPerProvider" class="form-input" value="700" oninput="calculate()">
                                <span class="form-hint">Typical: $500-900</span>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Per Staff User/Month</label>
                                <input type="number" id="modmedPerStaff" class="form-input" value="100" oninput="calculate()">
                                <span class="form-hint">Non-provider users</span>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Implementation (one-time)</label>
                                <input type="number" id="modmedImplementation" class="form-input" value="10000" oninput="calculate()">
                                <span class="form-hint">Training, migration, setup</span>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Annual Support</label>
                                <input type="number" id="modmedSupport" class="form-input" value="0" oninput="calculate()">
                                <span class="form-hint">If not included</span>
                            </div>
                        </div>
                        <div class="revenue-summary" style="margin-top:20px">
                            <div class="revenue-stat">
                                <div class="revenue-stat-label">Monthly Subscription</div>
                                <div class="revenue-stat-value" id="monthlySubscription">$0</div>
                            </div>
                            <div class="revenue-stat">
                                <div class="revenue-stat-label">Year 1 Total</div>
                                <div class="revenue-stat-value accent" id="year1Investment">$0</div>
                            </div>
                            <div class="revenue-stat">
                                <div class="revenue-stat-label">Year 2+ Annual</div>
                                <div class="revenue-stat-value" id="ongoingCost">$0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- STEP 4: Improvement Assumptions -->
            <div class="card" id="card-improve">
                <div class="card-header" onclick="toggleCard('improve')">
                    <div class="card-title">
                        <div class="card-icon icon-improve">üìà</div>
                        <div>
                            <h3>Improvement Assumptions</h3>
                            <p>Expected efficiency gains</p>
                        </div>
                    </div>
                    <div class="card-meta">
                        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <p style="font-size:13px;color:var(--text-secondary);margin-bottom:16px">
                            Adjust based on practice specifics. These are conservative industry estimates.
                        </p>
                        <div class="improvement-grid">
                            <div class="improvement-item">
                                <div class="improvement-info">
                                    <h4>Charting Time</h4>
                                    <p>Templates, voice</p>
                                </div>
                                <div class="improvement-input">
                                    <input type="number" id="improvCharting" value="70" oninput="calculate()">
                                    <span>%</span>
                                </div>
                            </div>
                            <div class="improvement-item">
                                <div class="improvement-info">
                                    <h4>Denial Reduction</h4>
                                    <p>Smart coding</p>
                                </div>
                                <div class="improvement-input">
                                    <input type="number" id="improvDenial" value="50" oninput="calculate()">
                                    <span>%</span>
                                </div>
                            </div>
                            <div class="improvement-item">
                                <div class="improvement-info">
                                    <h4>No-Show Reduction</h4>
                                    <p>Reminders</p>
                                </div>
                                <div class="improvement-input">
                                    <input type="number" id="improvNoShow" value="40" oninput="calculate()">
                                    <span>%</span>
                                </div>
                            </div>
                            <div class="improvement-item">
                                <div class="improvement-info">
                                    <h4>Admin Time</h4>
                                    <p>Automation</p>
                                </div>
                                <div class="improvement-input">
                                    <input type="number" id="improvAdmin" value="50" oninput="calculate()">
                                    <span>%</span>
                                </div>
                            </div>
                            <div class="improvement-item">
                                <div class="improvement-info">
                                    <h4>Charge Capture</h4>
                                    <p>Prompts, tracking</p>
                                </div>
                                <div class="improvement-input">
                                    <input type="number" id="improvCharge" value="75" oninput="calculate()">
                                    <span>%</span>
                                </div>
                            </div>
                            <div class="improvement-item">
                                <div class="improvement-info">
                                    <h4>Collection Rate</h4>
                                    <p>A/R management</p>
                                </div>
                                <div class="improvement-input">
                                    <input type="number" id="improvCollection" value="50" oninput="calculate()">
                                    <span>%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Sidebar: Results -->
        <div class="sidebar">
            
            <!-- Sandler Pain Box -->
            <div class="pain-box">
                <div class="pain-box-label">üíî Cost of Doing Nothing</div>
                <div class="pain-box-value" id="totalPainCost">$0</div>
                <div class="pain-box-sub">lost every year</div>
                
                <div class="pain-breakdown">
                    <div class="pain-breakdown-item">
                        <span>Clinical Workflow</span>
                        <span id="summClinical">$0</span>
                    </div>
                    <div class="pain-breakdown-item">
                        <span>Revenue Cycle</span>
                        <span id="summBilling">$0</span>
                    </div>
                    <div class="pain-breakdown-item">
                        <span>Patient Flow</span>
                        <span id="summPatient">$0</span>
                    </div>
                    <div class="pain-breakdown-item">
                        <span>Compliance & Ops</span>
                        <span id="summCompliance">$0</span>
                    </div>
                </div>
                
                <div class="pain-3year">
                    <div class="pain-3year-label">3-Year Cost of Inaction</div>
                    <div class="pain-3year-value" id="threeYearPain">$0</div>
                </div>
            </div>

            <!-- ROI Box -->
            <div class="roi-box">
                <div class="roi-label">Return on Investment</div>
                <div class="roi-value" id="roiPercent">0%</div>
                <div class="roi-payback">Payback: <strong id="paybackMonths">0</strong> months</div>
            </div>

            <!-- Savings Breakdown -->
            <div class="savings-card">
                <div class="savings-header">
                    <h3>Projected Annual Savings</h3>
                </div>
                <div class="savings-body">
                    <div class="savings-item">
                        <span>Clinical Efficiency</span>
                        <span class="green" id="saveClinical">$0</span>
                    </div>
                    <div class="savings-item">
                        <span>Revenue Recovery</span>
                        <span class="green" id="saveRevenue">$0</span>
                    </div>
                    <div class="savings-item">
                        <span>Patient Flow</span>
                        <span class="green" id="savePatient">$0</span>
                    </div>
                    <div class="savings-item">
                        <span>Operations</span>
                        <span class="green" id="saveOps">$0</span>
                    </div>
                    <div class="savings-divider"></div>
                    <div class="savings-item savings-total">
                        <span>Total Annual Savings</span>
                        <span class="green" id="totalSavings">$0</span>
                    </div>
                </div>
            </div>

            <!-- Net Benefit -->
            <div class="net-card">
                <div class="net-item">
                    <span>Year 1 Investment</span>
                    <span id="displayY1Invest">$0</span>
                </div>
                <div class="net-item">
                    <span>Year 1 Savings</span>
                    <span id="displayY1Save">$0</span>
                </div>
                <div class="net-item highlight">
                    <span>Net Year 1</span>
                    <span id="netYear1">$0</span>
                </div>
                <div class="net-item highlight">
                    <span>Net 3-Year</span>
                    <span id="netYear3">$0</span>
                </div>
            </div>

        </div>
    </main>

    <script>
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // CONFIGURATION
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        const specialtyConfig = {
            plastic: {
                name: 'Plastic Surgery / Aesthetics',
                patientsPerDay: 20,
                revenuePerVisit: 350,
                proceduresPerMonth: 40,
                patientHint: 'Plastic: 15-25',
                revenueHint: 'Plastic: $300-500',
                staff: [
                    { role: 'Physician', count: 2, hourlyCost: 150 },
                    { role: 'PA/NP', count: 1, hourlyCost: 75 },
                    { role: 'Medical Assistant', count: 3, hourlyCost: 22 },
                    { role: 'Front Desk', count: 2, hourlyCost: 18 },
                    { role: 'Billing Staff', count: 1, hourlyCost: 25 },
                    { role: 'Practice Manager', count: 1, hourlyCost: 40 },
                    { role: 'RN/Nurse', count: 1, hourlyCost: 45 }
                ],
                defaults: {
                    chartingHours: 1,
                    lookupMinutes: 8,
                    priorAuthsPerWeek: 15,
                    denialRate: 8,
                    collectionRate: 92,
                    noShowRate: 12,
                    callsPerDay: 50
                }
            },
            allergy: {
                name: 'Allergy / Immunology',
                patientsPerDay: 30,
                revenuePerVisit: 180,
                proceduresPerMonth: 200,
                patientHint: 'Allergy: 25-40',
                revenueHint: 'Allergy: $150-250',
                staff: [
                    { role: 'Physician', count: 2, hourlyCost: 140 },
                    { role: 'PA/NP', count: 1, hourlyCost: 70 },
                    { role: 'Medical Assistant', count: 4, hourlyCost: 20 },
                    { role: 'Front Desk', count: 2, hourlyCost: 17 },
                    { role: 'Billing Staff', count: 2, hourlyCost: 24 },
                    { role: 'Practice Manager', count: 1, hourlyCost: 38 },
                    { role: 'RN/Nurse', count: 2, hourlyCost: 42 },
                    { role: 'Allergy Tech', count: 2, hourlyCost: 20 }
                ],
                defaults: {
                    chartingHours: 1.5,
                    lookupMinutes: 6,
                    priorAuthsPerWeek: 25,
                    denialRate: 10,
                    collectionRate: 90,
                    noShowRate: 15,
                    callsPerDay: 80
                }
            }
        };

        let currentSpecialty = 'plastic';
        let staffData = [];

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // UTILITY FUNCTIONS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        function formatCurrency(num) {
            if (Math.abs(num) >= 1000000) {
                return '$' + (num / 1000000).toFixed(1) + 'M';
            }
            return '$' + Math.round(num).toLocaleString();
        }

        function getVal(id, def = 0) {
            const el = document.getElementById(id);
            return el ? (parseFloat(el.value) || def) : def;
        }

        function setVal(id, val) {
            const el = document.getElementById(id);
            if (el) el.value = val;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // CARD TOGGLE
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        function toggleCard(id) {
            const card = document.getElementById('card-' + id);
            card.classList.toggle('expanded');
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // SPECIALTY SWITCH
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        function switchSpecialty(specialty) {
            currentSpecialty = specialty;
            const config = specialtyConfig[specialty];

            // Update tabs
            document.querySelectorAll('.specialty-tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById('tab-' + specialty).classList.add('active');

            // Update hints
            document.getElementById('patientHint').textContent = config.patientHint;
            document.getElementById('revenueHint').textContent = config.revenueHint;

            // Set defaults
            setVal('patientsPerDay', config.patientsPerDay);
            setVal('revenuePerVisit', config.revenuePerVisit);
            setVal('proceduresPerMonth', config.proceduresPerMonth);
            setVal('chartingHours', config.defaults.chartingHours);
            setVal('lookupMinutes', config.defaults.lookupMinutes);
            setVal('priorAuthsPerWeek', config.defaults.priorAuthsPerWeek);
            setVal('denialRate', config.defaults.denialRate);
            setVal('collectionRate', config.defaults.collectionRate);
            setVal('noShowRate', config.defaults.noShowRate);
            setVal('callsPerDay', config.defaults.callsPerDay);

            // Rebuild staff
            staffData = JSON.parse(JSON.stringify(config.staff));
            renderStaffTable();
            calculate();
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // STAFF TABLE
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        function renderStaffTable() {
            const workDays = getVal('workDays', 20);
            const hoursPerDay = getVal('hoursPerDay', 9);
            const annualHours = workDays * 12 * hoursPerDay;

            const tbody = document.getElementById('staffTable');
            tbody.innerHTML = staffData.map((s, i) => {
                const annual = s.count * s.hourlyCost * annualHours;
                return `
                    <tr>
                        <td>
                            <input type="text" value="${s.role}" class="role-input"
                                onchange="staffData[${i}].role = this.value">
                        </td>
                        <td>
                            <input type="number" value="${s.count}" min="0"
                                onchange="staffData[${i}].count = parseFloat(this.value) || 0; calculate()">
                        </td>
                        <td>
                            <input type="number" value="${s.hourlyCost}" min="0"
                                onchange="staffData[${i}].hourlyCost = parseFloat(this.value) || 0; calculate()">
                        </td>
                        <td style="font-family:'JetBrains Mono',monospace;color:var(--text-secondary)">${formatCurrency(annual)}</td>
                    </tr>
                `;
            }).join('');

            // Update totals
            const totalCount = staffData.reduce((sum, s) => sum + s.count, 0);
            document.getElementById('totalStaffDisplay').textContent = totalCount + ' staff';
        }

        function getProviderCount() {
            return staffData.filter(s =>
                s.role.toLowerCase().includes('physician') ||
                s.role.toLowerCase().includes('pa') ||
                s.role.toLowerCase().includes('np')
            ).reduce((sum, s) => sum + s.count, 0) || 1;
        }

        function getStaffCount() {
            return staffData.filter(s =>
                !s.role.toLowerCase().includes('physician') &&
                !s.role.toLowerCase().includes('pa') &&
                !s.role.toLowerCase().includes('np')
            ).reduce((sum, s) => sum + s.count, 0) || 0;
        }

        function getBillingStaffCount() {
            return staffData.filter(s =>
                s.role.toLowerCase().includes('billing')
            ).reduce((sum, s) => sum + s.count, 0) || 1;
        }

        function getAvgStaffCost() {
            const nonProviders = staffData.filter(s =>
                !s.role.toLowerCase().includes('physician')
            );
            if (nonProviders.length === 0) return 25;
            return nonProviders.reduce((sum, s) => sum + s.hourlyCost, 0) / nonProviders.length;
        }

        function getProviderCost() {
            const providers = staffData.filter(s => s.role.toLowerCase().includes('physician'));
            if (providers.length === 0) return 150;
            return providers.reduce((sum, s) => sum + s.hourlyCost, 0) / providers.length;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // MAIN CALCULATION
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        function calculate() {
            renderStaffTable();

            const workDays = getVal('workDays', 20);
            const hoursPerDay = getVal('hoursPerDay', 9);
            const providers = getProviderCount();
            const patientsPerDay = getVal('patientsPerDay', 20);
            const revenuePerVisit = getVal('revenuePerVisit', 350);

            const annualWorkDays = workDays * 12;
            const annualVisits = providers * patientsPerDay * annualWorkDays;
            const annualRevenue = annualVisits * revenuePerVisit;

            document.getElementById('annualVisits').textContent = annualVisits.toLocaleString();
            document.getElementById('annualRevenue').textContent = formatCurrency(annualRevenue);
            document.getElementById('annualRevenueDisplay').textContent = formatCurrency(annualRevenue);
            document.getElementById('revenuePerProvider').textContent = formatCurrency(annualRevenue / providers);

            // ‚ïê‚ïê‚ïê CLINICAL WORKFLOW ‚ïê‚ïê‚ïê
            const providerHourlyCost = getProviderCost();
            const chartingHours = getVal('chartingHours', 1);
            const chartingCost = chartingHours * providerHourlyCost * 2 * annualWorkDays * providers; // 2x for opportunity cost

            const lookupMinutes = getVal('lookupMinutes', 8);
            const lookupRate = getVal('lookupRate', 75);
            const lookupCost = (lookupMinutes / 60) * lookupRate * annualVisits;

            const priorAuthsPerWeek = getVal('priorAuthsPerWeek', 15);
            const priorAuthMinutes = getVal('priorAuthMinutes', 45);
            const priorAuthCost = (priorAuthMinutes / 60) * getAvgStaffCost() * priorAuthsPerWeek * 52;

            const rxMinutes = getVal('rxMinutes', 45);
            const rxRate = getVal('rxRate', 50);
            const rxCost = (rxMinutes / 60) * rxRate * annualWorkDays;

            const clinicalTotal = chartingCost + lookupCost + priorAuthCost + rxCost;

            document.getElementById('chartingCost').textContent = formatCurrency(chartingCost);
            document.getElementById('lookupCost').textContent = formatCurrency(lookupCost);
            document.getElementById('priorAuthCost').textContent = formatCurrency(priorAuthCost);
            document.getElementById('rxCost').textContent = formatCurrency(rxCost);
            document.getElementById('clinicalTotal').textContent = formatCurrency(clinicalTotal);

            // ‚ïê‚ïê‚ïê REVENUE CYCLE ‚ïê‚ïê‚ïê
            const denialRate = getVal('denialRate', 8) / 100;
            const reworkCost = getVal('reworkCost', 35);
            const denialCost = annualVisits * denialRate * reworkCost;

            const collectionRate = getVal('collectionRate', 92) / 100;
            const collectionTarget = getVal('collectionTarget', 95) / 100;
            const collectionGap = Math.max(0, collectionTarget - collectionRate);
            const collectionCost = annualRevenue * collectionGap;

            const daysAR = getVal('daysAR', 45);
            const daysARTarget = getVal('daysARTarget', 35);
            const arGap = Math.max(0, daysAR - daysARTarget);
            const dailyRevenue = annualRevenue / 365;
            const arCost = dailyRevenue * arGap * 0.05;

            const missedChargeRate = getVal('missedChargeRate', 2) / 100;
            const missedChargeCost = annualRevenue * missedChargeRate;

            const billingHours = getVal('billingHours', 15);
            const billingRate = getVal('billingRate', 25);
            const billingStaff = getBillingStaffCount();
            const billingLaborCost = billingHours * billingRate * 52 * billingStaff;

            const billingTotal = denialCost + collectionCost + arCost + missedChargeCost + billingLaborCost;

            document.getElementById('denialCost').textContent = formatCurrency(denialCost);
            document.getElementById('collectionCost').textContent = formatCurrency(collectionCost);
            document.getElementById('arCost').textContent = formatCurrency(arCost);
            document.getElementById('missedChargeCost').textContent = formatCurrency(missedChargeCost);
            document.getElementById('billingLaborCost').textContent = formatCurrency(billingLaborCost);
            document.getElementById('billingTotal').textContent = formatCurrency(billingTotal);

            // ‚ïê‚ïê‚ïê PATIENT FLOW ‚ïê‚ïê‚ïê
            const noShowRate = getVal('noShowRate', 12) / 100;
            const noShowCost = annualVisits * noShowRate * revenuePerVisit;

            const checkinMinutes = getVal('checkinMinutes', 8);
            const checkinRate = getVal('checkinRate', 20);
            const checkinCost = (checkinMinutes / 60) * checkinRate * annualVisits;

            const callsPerDay = getVal('callsPerDay', 50);
            const callMinutes = getVal('callMinutes', 4);
            const phoneCost = (callMinutes / 60) * getAvgStaffCost() * callsPerDay * annualWorkDays;

            const insuranceMinutes = getVal('insuranceMinutes', 7);
            const insurancePercent = getVal('insurancePercent', 80) / 100;
            const insuranceCost = (insuranceMinutes / 60) * getAvgStaffCost() * annualVisits * insurancePercent;

            const patientTotal = noShowCost + checkinCost + phoneCost + insuranceCost;

            document.getElementById('noShowCost').textContent = formatCurrency(noShowCost);
            document.getElementById('checkinCost').textContent = formatCurrency(checkinCost);
            document.getElementById('phoneCost').textContent = formatCurrency(phoneCost);
            document.getElementById('insuranceCost').textContent = formatCurrency(insuranceCost);
            document.getElementById('patientTotal').textContent = formatCurrency(patientTotal);

            // ‚ïê‚ïê‚ïê COMPLIANCE ‚ïê‚ïê‚ïê
            const mipsStatus = parseFloat(document.getElementById('mipsStatus').value) / 100;
            const mipsTarget = parseFloat(document.getElementById('mipsTarget').value) / 100;
            const mipsImpact = annualRevenue * (mipsTarget - mipsStatus);
            const mipsCost = Math.abs(mipsImpact);

            const itMonthlyCost = getVal('itMonthlyCost', 500);
            const itCost = itMonthlyCost * 12;

            const newHires = getVal('newHires', 2);
            const trainingHours = getVal('trainingHours', 30);
            const trainingCost = newHires * trainingHours * getAvgStaffCost();

            const complianceTotal = mipsCost + itCost + trainingCost;

            document.getElementById('mipsCost').textContent = formatCurrency(mipsCost);
            document.getElementById('itCost').textContent = formatCurrency(itCost);
            document.getElementById('trainingCost').textContent = formatCurrency(trainingCost);
            document.getElementById('complianceTotal').textContent = formatCurrency(complianceTotal);

            // ‚ïê‚ïê‚ïê TOTAL PAIN ‚ïê‚ïê‚ïê
            const totalPainCost = clinicalTotal + billingTotal + patientTotal + complianceTotal;

            document.getElementById('totalPainCost').textContent = formatCurrency(totalPainCost);
            document.getElementById('summClinical').textContent = formatCurrency(clinicalTotal);
            document.getElementById('summBilling').textContent = formatCurrency(billingTotal);
            document.getElementById('summPatient').textContent = formatCurrency(patientTotal);
            document.getElementById('summCompliance').textContent = formatCurrency(complianceTotal);
            document.getElementById('threeYearPain').textContent = formatCurrency(totalPainCost * 3);

            // ‚ïê‚ïê‚ïê MODMED INVESTMENT ‚ïê‚ïê‚ïê
            const modmedPerProvider = getVal('modmedPerProvider', 700);
            const modmedPerStaff = getVal('modmedPerStaff', 100);
            const modmedImplementation = getVal('modmedImplementation', 10000);
            const modmedSupport = getVal('modmedSupport', 0);

            const monthlySubscription = (providers * modmedPerProvider) + (getStaffCount() * modmedPerStaff);
            const year1Investment = (monthlySubscription * 12) + modmedImplementation + modmedSupport;
            const ongoingCost = monthlySubscription * 12;

            document.getElementById('monthlySubscription').textContent = formatCurrency(monthlySubscription);
            document.getElementById('year1Investment').textContent = formatCurrency(year1Investment);
            document.getElementById('year1InvestDisplay').textContent = formatCurrency(year1Investment);
            document.getElementById('ongoingCost').textContent = formatCurrency(ongoingCost);

            // ‚ïê‚ïê‚ïê SAVINGS ‚ïê‚ïê‚ïê
            const improvCharting = getVal('improvCharting', 70) / 100;
            const improvDenial = getVal('improvDenial', 50) / 100;
            const improvNoShow = getVal('improvNoShow', 40) / 100;
            const improvAdmin = getVal('improvAdmin', 50) / 100;
            const improvCharge = getVal('improvCharge', 75) / 100;
            const improvCollection = getVal('improvCollection', 50) / 100;

            const saveClinical = (chartingCost * improvCharting) + (lookupCost * improvAdmin) + (priorAuthCost * improvAdmin) + (rxCost * improvAdmin);
            const saveRevenue = (denialCost * improvDenial) + (collectionCost * improvCollection) + (missedChargeCost * improvCharge) + (billingLaborCost * improvAdmin);
            const savePatient = (noShowCost * improvNoShow) + (checkinCost * improvAdmin) + (phoneCost * improvAdmin) + (insuranceCost * improvAdmin);
            const saveOps = mipsImpact + (itCost * 0.3) + (trainingCost * 0.5);

            const totalSavings = saveClinical + saveRevenue + savePatient + saveOps;

            document.getElementById('saveClinical').textContent = formatCurrency(saveClinical);
            document.getElementById('saveRevenue').textContent = formatCurrency(saveRevenue);
            document.getElementById('savePatient').textContent = formatCurrency(savePatient);
            document.getElementById('saveOps').textContent = formatCurrency(saveOps);
            document.getElementById('totalSavings').textContent = formatCurrency(totalSavings);

            // ‚ïê‚ïê‚ïê ROI ‚ïê‚ïê‚ïê
            const netYear1 = totalSavings - year1Investment;
            const year2Plus = totalSavings - ongoingCost;
            const netYear3 = netYear1 + (year2Plus * 2);

            const roi = year1Investment > 0 ? (netYear1 / year1Investment) * 100 : 0;
            const monthlySavings = totalSavings / 12;
            const paybackMonths = monthlySavings > 0 ? Math.ceil(year1Investment / monthlySavings) : 99;

            document.getElementById('roiPercent').textContent = Math.round(roi) + '%';
            document.getElementById('paybackMonths').textContent = paybackMonths > 24 ? '24+' : paybackMonths;
            document.getElementById('displayY1Invest').textContent = formatCurrency(year1Investment);
            document.getElementById('displayY1Save').textContent = formatCurrency(totalSavings);
            document.getElementById('netYear1').textContent = formatCurrency(netYear1);
            document.getElementById('netYear3').textContent = formatCurrency(netYear3);

            // Store for copy
            window.calcResults = {
                practiceName: document.getElementById('practiceName').value || 'Practice',
                specialty: specialtyConfig[currentSpecialty].name,
                providers,
                annualRevenue,
                totalPainCost,
                clinicalTotal,
                billingTotal,
                patientTotal,
                complianceTotal,
                totalSavings,
                year1Investment,
                netYear1,
                netYear3,
                roi,
                paybackMonths
            };
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // RESET
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        function resetAll() {
            document.getElementById('practiceName').value = '';
            switchSpecialty(currentSpecialty);
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // COPY SUMMARY
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        function copySummary() {
            const r = window.calcResults;
            const summary = `
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
ModMed EHR ROI Analysis
${r.practiceName} - ${r.specialty}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

PRACTICE OVERVIEW
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚Ä¢ Providers: ${r.providers}
‚Ä¢ Estimated Annual Revenue: ${formatCurrency(r.annualRevenue)}

COST OF DOING NOTHING (Annual)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Clinical Workflow:     ${formatCurrency(r.clinicalTotal)}
Revenue Cycle:         ${formatCurrency(r.billingTotal)}
Patient Flow:          ${formatCurrency(r.patientTotal)}
Compliance & Ops:      ${formatCurrency(r.complianceTotal)}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TOTAL ANNUAL LOSS:     ${formatCurrency(r.totalPainCost)}
3-YEAR LOSS:           ${formatCurrency(r.totalPainCost * 3)}

MODMED INVESTMENT & RETURN
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Year 1 Investment:     ${formatCurrency(r.year1Investment)}
Projected Savings:     ${formatCurrency(r.totalSavings)}
Net Year 1 Benefit:    ${formatCurrency(r.netYear1)}
Net 3-Year Benefit:    ${formatCurrency(r.netYear3)}
ROI:                   ${Math.round(r.roi)}%
Payback Period:        ${r.paybackMonths > 24 ? '24+' : r.paybackMonths} months

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            `.trim();

            navigator.clipboard.writeText(summary).then(() => {
                // Visual feedback
                const btn = document.querySelector('.btn-primary');
                const originalText = btn.innerHTML;
                btn.innerHTML = '‚úì Copied!';
                btn.style.background = 'var(--gain-green)';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.style.background = '';
                }, 2000);
            });
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // INIT
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        document.addEventListener('DOMContentLoaded', function() {
            switchSpecialty('plastic');
        });
    </script>
</body>
</html>

