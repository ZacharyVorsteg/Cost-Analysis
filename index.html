<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ModMed ROI Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root{--purple:#6B3FA0;--purple-light:#8B5FC0;--gold:#F5B335;--bg:#fafafa;--card:#fff;--section:#f5f5f7;--text:#1a1a2e;--text2:#5a5a6e;--muted:#8a8a9a;--border:#e5e5ea;--red:#dc3545;--green:#198754;--radius:12px}
        *{box-sizing:border-box;margin:0;padding:0}
        body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);line-height:1.5;font-size:14px}
        .header{background:#fff;border-bottom:1px solid var(--border);padding:10px 20px;position:sticky;top:0;z-index:100}
        .header-content{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px}
        .logo{display:flex;align-items:center;gap:8px;font-weight:600;color:var(--purple)}
        .logo svg{width:32px;height:32px}
        .tabs{display:flex;background:var(--section);border-radius:8px;padding:3px}
        .tab{padding:8px 16px;border-radius:6px;font-size:13px;font-weight:500;border:none;cursor:pointer;background:transparent;color:var(--text2);transition:all .2s}
        .tab.active{background:var(--purple);color:#fff}
        .controls{display:flex;gap:6px;flex-wrap:wrap}
        .btn{padding:8px 14px;border-radius:8px;font-size:13px;font-weight:500;border:none;cursor:pointer}
        .btn-primary{background:var(--purple);color:#fff}
        .btn-secondary{background:var(--section);color:var(--text2)}
        
        .main{max-width:1200px;margin:0 auto;padding:20px}
        
        /* Practice Setup */
        .setup-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:20px;margin-bottom:20px}
        .setup-title{font-size:16px;font-weight:600;margin-bottom:16px;display:flex;align-items:center;gap:8px}
        .setup-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px}
        .field{display:flex;flex-direction:column;gap:4px}
        .field label{font-size:12px;font-weight:500;color:var(--text2)}
        .field input,.field select{background:var(--section);border:1px solid var(--border);border-radius:6px;padding:10px 12px;font-size:14px;width:100%}
        .field input:focus,.field select:focus{outline:none;border-color:var(--purple)}
        .field .hint{font-size:11px;color:var(--muted)}
        
        /* Cost Breakdown */
        .breakdown-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin-bottom:20px}
        .breakdown-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden}
        .breakdown-header{padding:14px 16px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
        .breakdown-header h3{font-size:14px;font-weight:600;display:flex;align-items:center;gap:8px}
        .breakdown-header .total{font-family:'JetBrains Mono',monospace;font-size:16px;font-weight:700;color:var(--red)}
        .breakdown-body{padding:12px 16px}
        
        .cost-row{display:grid;grid-template-columns:1fr auto auto;gap:8px;align-items:center;padding:10px 0;border-bottom:1px solid var(--section)}
        .cost-row:last-child{border-bottom:none}
        .cost-label{font-size:13px}
        .cost-label small{display:block;font-size:11px;color:var(--muted)}
        .cost-input{width:70px;background:var(--section);border:1px solid var(--border);border-radius:4px;padding:6px 8px;font-size:12px;text-align:right;font-family:'JetBrains Mono',monospace}
        .cost-input:focus{outline:none;border-color:var(--purple)}
        .cost-value{font-family:'JetBrains Mono',monospace;font-size:13px;font-weight:500;color:var(--red);text-align:right;min-width:80px}
        .cost-calc{font-size:10px;color:var(--muted);grid-column:1/-1;padding-top:4px;font-family:'JetBrains Mono',monospace}
        
        /* Summary Panel */
        .summary-panel{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:20px;margin-bottom:20px}
        .summary-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}
        .summary-item{text-align:center;padding:16px;background:var(--section);border-radius:8px}
        .summary-item.pain{background:linear-gradient(135deg,#fee2e2,#fecaca)}
        .summary-item.roi{background:linear-gradient(135deg,#e0e7ff,#c7d2fe)}
        .summary-item.savings{background:linear-gradient(135deg,#dcfce7,#bbf7d0)}
        .summary-label{font-size:12px;color:var(--text2);margin-bottom:4px}
        .summary-value{font-family:'JetBrains Mono',monospace;font-size:28px;font-weight:700}
        .summary-item.pain .summary-value{color:var(--red)}
        .summary-item.roi .summary-value{color:var(--purple)}
        .summary-item.savings .summary-value{color:var(--green)}
        .summary-sub{font-size:11px;color:var(--muted);margin-top:4px}
        
        /* Investment Section */
        .invest-section{background:linear-gradient(135deg,var(--purple),var(--purple-light));color:#fff;border-radius:var(--radius);padding:20px;margin-bottom:20px}
        .invest-title{font-size:14px;font-weight:600;margin-bottom:16px;opacity:.9}
        .invest-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}
        .invest-field label{font-size:11px;opacity:.8;display:block;margin-bottom:4px}
        .invest-field input{background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.3);border-radius:6px;padding:8px 10px;font-size:13px;color:#fff;width:100%}
        .invest-field input::placeholder{color:rgba(255,255,255,.5)}
        .invest-totals{display:flex;justify-content:space-around;margin-top:16px;padding-top:16px;border-top:1px solid rgba(255,255,255,.2)}
        .invest-total{text-align:center}
        .invest-total-label{font-size:11px;opacity:.8}
        .invest-total-value{font-family:'JetBrains Mono',monospace;font-size:20px;font-weight:700}
        
        /* Assumptions */
        .assumptions{background:#fffbeb;border:1px solid #fcd34d;border-radius:var(--radius);padding:16px;margin-bottom:20px}
        .assumptions h4{font-size:13px;font-weight:600;color:#92400e;margin-bottom:12px;display:flex;align-items:center;gap:6px}
        .assumption-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px}
        .assumption-item{display:flex;justify-content:space-between;align-items:center;font-size:12px;padding:8px 10px;background:rgba(255,255,255,.7);border-radius:6px}
        .assumption-item input{width:55px;background:#fff;border:1px solid #fcd34d;border-radius:4px;padding:4px 6px;font-size:12px;text-align:right}
        
        /* Talk Track */
        .talk-track{background:var(--gold);border-radius:var(--radius);padding:20px;margin-bottom:20px}
        .talk-track h3{font-size:14px;font-weight:700;margin-bottom:16px}
        .talk-step{background:rgba(255,255,255,.95);border-radius:8px;padding:14px;margin-bottom:10px}
        .talk-step:last-child{margin-bottom:0}
        .talk-step-num{display:inline-flex;width:22px;height:22px;align-items:center;justify-content:center;background:var(--purple);color:#fff;border-radius:50%;font-size:11px;font-weight:700;margin-right:8px}
        .talk-step strong{font-size:13px}
        .talk-step p{font-size:12px;color:var(--text2);margin:6px 0 0 30px}
        .script{background:var(--section);padding:10px;border-radius:6px;font-size:12px;margin:8px 0 0 30px;border-left:3px solid var(--purple);font-style:italic}
        .script strong{color:var(--purple);font-style:normal}
        
        /* Bottom Line */
        .bottom-line{background:var(--card);border:2px solid var(--green);border-radius:var(--radius);padding:20px;text-align:center}
        .bottom-line h3{font-size:14px;color:var(--green);margin-bottom:16px}
        .bottom-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
        .bottom-stat{padding:12px}
        .bottom-label{font-size:11px;color:var(--text2)}
        .bottom-value{font-family:'JetBrains Mono',monospace;font-size:24px;font-weight:700;margin-top:4px}
        .bottom-value.red{color:var(--red)}
        .bottom-value.purple{color:var(--purple)}
        .bottom-value.green{color:var(--green)}
        
        @media(max-width:600px){
            .breakdown-grid{grid-template-columns:1fr}
            .cost-row{grid-template-columns:1fr;gap:4px}
            .cost-value{text-align:left}
            .bottom-grid{grid-template-columns:1fr}
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="48" fill="#8C8C8C"/><circle cx="50" cy="50" r="44" fill="#F5B335"/><ellipse cx="50" cy="75" rx="44" ry="25" fill="#6B3FA0"/><path d="M15 50 L30 50 L38 25 L50 70 L62 30 L70 50 L85 50" stroke="#fff" stroke-width="6" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
                ModMed ROI Calculator
            </div>
            <div class="tabs">
                <button class="tab active" onclick="switchSpecialty('plastic')" id="tab-plastic">Plastic Surgery</button>
                <button class="tab" onclick="switchSpecialty('allergy')" id="tab-allergy">Allergy</button>
            </div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="resetAll()">‚Ü∫ Reset</button>
                <button class="btn btn-primary" onclick="copySummary()">üìã Copy Summary</button>
            </div>
        </div>
    </header>

    <main class="main">
        <!-- PRACTICE SETUP -->
        <div class="setup-card">
            <div class="setup-title">üè• Practice Profile</div>
            <div class="setup-grid">
                <div class="field">
                    <label>Practice Name</label>
                    <input type="text" id="practiceName" placeholder="Enter name..." oninput="calc()">
                </div>
                <div class="field">
                    <label>Current EHR System</label>
                    <select id="currentEHR" onchange="calc()">
                        <option value="1.5">Paper/Manual (1.5x inefficiency)</option>
                        <option value="1.3">Legacy EHR (1.3x inefficiency)</option>
                        <option value="1.15">Generic EHR (1.15x inefficiency)</option>
                        <option value="0.95">Competitor Specialty (0.95x)</option>
                    </select>
                    <span class="hint">Affects all time-based costs</span>
                </div>
                <div class="field">
                    <label>Number of Providers</label>
                    <input type="number" id="providers" value="2" min="1" oninput="calc()">
                    <span class="hint">Physicians, PAs, NPs</span>
                </div>
                <div class="field">
                    <label>Support Staff</label>
                    <input type="number" id="staff" value="8" min="0" oninput="calc()">
                    <span class="hint">MAs, front desk, billing, etc.</span>
                </div>
                <div class="field">
                    <label>Patients/Provider/Day</label>
                    <input type="number" id="patientsPerDay" value="20" min="1" oninput="calc()">
                </div>
                <div class="field">
                    <label>Avg Revenue/Visit</label>
                    <input type="number" id="revenuePerVisit" value="350" min="0" oninput="calc()">
                    <span class="hint">Include procedures, products</span>
                </div>
                <div class="field">
                    <label>Working Days/Month</label>
                    <input type="number" id="workDays" value="20" min="1" oninput="calc()">
                </div>
                <div class="field">
                    <label>Avg Staff Hourly Cost</label>
                    <input type="number" id="staffHourlyCost" value="25" min="0" oninput="calc()">
                    <span class="hint">Blended rate for non-providers</span>
                </div>
            </div>
        </div>

        <!-- CALCULATED METRICS -->
        <div style="background:#e0e7ff;border-radius:8px;padding:12px 16px;margin-bottom:20px;display:flex;justify-content:space-around;flex-wrap:wrap;gap:12px">
            <div style="text-align:center"><div style="font-size:11px;color:#4338ca">Annual Visits</div><div style="font-family:'JetBrains Mono',monospace;font-size:18px;font-weight:600" id="annualVisits">0</div></div>
            <div style="text-align:center"><div style="font-size:11px;color:#4338ca">Annual Revenue</div><div style="font-family:'JetBrains Mono',monospace;font-size:18px;font-weight:600" id="annualRevenue">$0</div></div>
            <div style="text-align:center"><div style="font-size:11px;color:#4338ca">EHR Multiplier</div><div style="font-family:'JetBrains Mono',monospace;font-size:18px;font-weight:600" id="ehrMultiplier">1.5x</div></div>
            <div style="text-align:center"><div style="font-size:11px;color:#4338ca">Annual Staff Hours</div><div style="font-family:'JetBrains Mono',monospace;font-size:18px;font-weight:600" id="annualStaffHours">0</div></div>
        </div>

        <!-- COST BREAKDOWN -->
        <div class="breakdown-grid">
            <!-- Clinical Workflow -->
            <div class="breakdown-card">
                <div class="breakdown-header">
                    <h3>ü©∫ Clinical Workflow</h3>
                    <span class="total" id="clinicalTotal">$0</span>
                </div>
                <div class="breakdown-body">
                    <div class="cost-row">
                        <div class="cost-label">After-Hours Charting<small>Provider time √ó opportunity cost</small></div>
                        <input type="number" class="cost-input" id="chartingHours" value="1" step="0.5" oninput="calc()">
                        <div class="cost-value" id="chartingCost">$0</div>
                        <div class="cost-calc" id="chartingCalc"></div>
                    </div>
                    <div class="cost-row">
                        <div class="cost-label">Prior Authorizations<small>Staff time on PA requests</small></div>
                        <input type="number" class="cost-input" id="pasPerWeek" value="15" oninput="calc()">
                        <div class="cost-value" id="paCost">$0</div>
                        <div class="cost-calc" id="paCalc"></div>
                    </div>
                    <div class="cost-row">
                        <div class="cost-label">Patient Lookup Time<small>Chart searching per patient</small></div>
                        <input type="number" class="cost-input" id="lookupMin" value="8" oninput="calc()">
                        <div class="cost-value" id="lookupCost">$0</div>
                        <div class="cost-calc" id="lookupCalc"></div>
                    </div>
                    <div class="cost-row">
                        <div class="cost-label">Rx Management<small>Daily prescription tasks</small></div>
                        <input type="number" class="cost-input" id="rxMin" value="45" oninput="calc()">
                        <div class="cost-value" id="rxCost">$0</div>
                        <div class="cost-calc" id="rxCalc"></div>
                    </div>
                </div>
            </div>

            <!-- Revenue Cycle -->
            <div class="breakdown-card">
                <div class="breakdown-header">
                    <h3>üí∞ Revenue Cycle</h3>
                    <span class="total" id="revenueTotal">$0</span>
                </div>
                <div class="breakdown-body">
                    <div class="cost-row">
                        <div class="cost-label">Claim Denial Rate<small>Rework cost per denied claim</small></div>
                        <input type="number" class="cost-input" id="denialRate" value="8" oninput="calc()">
                        <div class="cost-value" id="denialCost">$0</div>
                        <div class="cost-calc" id="denialCalc"></div>
                    </div>
                    <div class="cost-row">
                        <div class="cost-label">Collection Rate Gap<small>Current vs 95% target</small></div>
                        <input type="number" class="cost-input" id="collectionRate" value="92" oninput="calc()">
                        <div class="cost-value" id="collectionCost">$0</div>
                        <div class="cost-calc" id="collectionCalc"></div>
                    </div>
                    <div class="cost-row">
                        <div class="cost-label">Missed Charges<small>% of revenue unbilled</small></div>
                        <input type="number" class="cost-input" id="missedCharges" value="2" step="0.5" oninput="calc()">
                        <div class="cost-value" id="missedCost">$0</div>
                        <div class="cost-calc" id="missedCalc"></div>
                    </div>
                    <div class="cost-row">
                        <div class="cost-label">Billing Staff Time<small>Manual work hrs/week/person</small></div>
                        <input type="number" class="cost-input" id="billingHrs" value="15" oninput="calc()">
                        <div class="cost-value" id="billingCost">$0</div>
                        <div class="cost-calc" id="billingCalc"></div>
                    </div>
                </div>
            </div>

            <!-- Patient Flow -->
            <div class="breakdown-card">
                <div class="breakdown-header">
                    <h3>üìÖ Patient Flow</h3>
                    <span class="total" id="patientTotal">$0</span>
                </div>
                <div class="breakdown-body">
                    <div class="cost-row">
                        <div class="cost-label">No-Show Rate<small>Lost revenue from missed appts</small></div>
                        <input type="number" class="cost-input" id="noShowRate" value="12" oninput="calc()">
                        <div class="cost-value" id="noShowCost">$0</div>
                        <div class="cost-calc" id="noShowCalc"></div>
                    </div>
                    <div class="cost-row">
                        <div class="cost-label">Phone Calls/Day<small>Staff time on calls</small></div>
                        <input type="number" class="cost-input" id="callsPerDay" value="50" oninput="calc()">
                        <div class="cost-value" id="phoneCost">$0</div>
                        <div class="cost-calc" id="phoneCalc"></div>
                    </div>
                    <div class="cost-row">
                        <div class="cost-label">Check-in/out Time<small>Minutes per patient</small></div>
                        <input type="number" class="cost-input" id="checkinMin" value="8" oninput="calc()">
                        <div class="cost-value" id="checkinCost">$0</div>
                        <div class="cost-calc" id="checkinCalc"></div>
                    </div>
                    <div class="cost-row">
                        <div class="cost-label">Insurance Verify<small>Manual eligibility mins/pt</small></div>
                        <input type="number" class="cost-input" id="verifyMin" value="7" oninput="calc()">
                        <div class="cost-value" id="verifyCost">$0</div>
                        <div class="cost-calc" id="verifyCalc"></div>
                    </div>
                </div>
            </div>

            <!-- Compliance & Ops -->
            <div class="breakdown-card">
                <div class="breakdown-header">
                    <h3>‚öñÔ∏è Compliance & Ops</h3>
                    <span class="total" id="opsTotal">$0</span>
                </div>
                <div class="breakdown-body">
                    <div class="cost-row">
                        <div class="cost-label">MIPS Opportunity<small>Current ‚Üí Target adjustment</small></div>
                        <select class="cost-input" id="mipsCurrent" style="width:auto" onchange="calc()">
                            <option value="-9">-9%</option>
                            <option value="-5">-5%</option>
                            <option value="0" selected>0%</option>
                            <option value="3">+3%</option>
                        </select>
                        <div class="cost-value" id="mipsCost">$0</div>
                        <div class="cost-calc" id="mipsCalc"></div>
                    </div>
                    <div class="cost-row">
                        <div class="cost-label">IT Support Monthly<small>Current system maintenance</small></div>
                        <input type="number" class="cost-input" id="itMonthly" value="500" oninput="calc()">
                        <div class="cost-value" id="itCost">$0</div>
                        <div class="cost-calc" id="itCalc"></div>
                    </div>
                    <div class="cost-row">
                        <div class="cost-label">Training New Hires<small># new staff per year</small></div>
                        <input type="number" class="cost-input" id="newHires" value="2" oninput="calc()">
                        <div class="cost-value" id="trainingCost">$0</div>
                        <div class="cost-calc" id="trainingCalc"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- IMPROVEMENT ASSUMPTIONS -->
        <div class="assumptions">
            <h4>üìà ModMed Improvement Assumptions (adjust as needed)</h4>
            <div class="assumption-grid">
                <div class="assumption-item"><span>Charting reduction</span><input type="number" id="impCharting" value="70" oninput="calc()">%</div>
                <div class="assumption-item"><span>Denial reduction</span><input type="number" id="impDenial" value="50" oninput="calc()">%</div>
                <div class="assumption-item"><span>No-show reduction</span><input type="number" id="impNoShow" value="40" oninput="calc()">%</div>
                <div class="assumption-item"><span>Admin time reduction</span><input type="number" id="impAdmin" value="50" oninput="calc()">%</div>
                <div class="assumption-item"><span>Charge capture improve</span><input type="number" id="impCharge" value="75" oninput="calc()">%</div>
                <div class="assumption-item"><span>PA time reduction</span><input type="number" id="impPA" value="60" oninput="calc()">%</div>
            </div>
        </div>

        <!-- MODMED INVESTMENT -->
        <div class="invest-section">
            <div class="invest-title">üíº ModMed Investment</div>
            <div class="invest-grid">
                <div class="invest-field">
                    <label>Per Provider/Month</label>
                    <input type="number" id="mmProvider" value="700" oninput="calc()">
                </div>
                <div class="invest-field">
                    <label>Per Staff User/Month</label>
                    <input type="number" id="mmStaff" value="100" oninput="calc()">
                </div>
                <div class="invest-field">
                    <label>Implementation (one-time)</label>
                    <input type="number" id="mmImpl" value="10000" oninput="calc()">
                </div>
                <div class="invest-field">
                    <label>Annual Support</label>
                    <input type="number" id="mmSupport" value="0" oninput="calc()">
                </div>
            </div>
            <div class="invest-totals">
                <div class="invest-total"><div class="invest-total-label">Monthly</div><div class="invest-total-value" id="mmMonthly">$0</div></div>
                <div class="invest-total"><div class="invest-total-label">Year 1</div><div class="invest-total-value" id="mmYear1">$0</div></div>
                <div class="invest-total"><div class="invest-total-label">Ongoing/Year</div><div class="invest-total-value" id="mmOngoing">$0</div></div>
            </div>
        </div>

        <!-- SUMMARY -->
        <div class="summary-panel">
            <div class="summary-grid">
                <div class="summary-item pain">
                    <div class="summary-label">üíî Annual Cost of Doing Nothing</div>
                    <div class="summary-value" id="totalPain">$0</div>
                    <div class="summary-sub">3-Year: <span id="pain3yr">$0</span></div>
                </div>
                <div class="summary-item savings">
                    <div class="summary-label">‚ú® Projected Annual Savings</div>
                    <div class="summary-value" id="totalSavings">$0</div>
                    <div class="summary-sub" id="savingsBreakdown"></div>
                </div>
                <div class="summary-item roi">
                    <div class="summary-label">üìà Year 1 ROI</div>
                    <div class="summary-value" id="roi">0%</div>
                    <div class="summary-sub">Payback: <span id="payback">0</span> months</div>
                </div>
            </div>
        </div>

        <!-- TALK TRACK -->
        <div class="talk-track">
            <h3>üéØ Sandler Talk Track</h3>
            <div class="talk-step">
                <span class="talk-step-num">1</span><strong>Surface the Pain</strong>
                <p>Get them to describe their challenges</p>
                <div class="script">"Tell me about your charting workflow. How much time are providers spending after hours on documentation?"</div>
            </div>
            <div class="talk-step">
                <span class="talk-step-num">2</span><strong>Quantify the Impact</strong>
                <p>Use the numbers to make it real</p>
                <div class="script">"Based on what you've shared, you're losing approximately <strong id="scriptPain">$0</strong> annually. Over 3 years, that's <strong id="scriptPain3">$0</strong> walking out the door."</div>
            </div>
            <div class="talk-step">
                <span class="talk-step-num">3</span><strong>Present the Solution</strong>
                <div class="script">"ModMed's specialty templates reduce charting time by <strong id="scriptCharting">70%</strong>. Integrated billing cuts denials by <strong id="scriptDenial">50%</strong>. Automated reminders reduce no-shows by <strong id="scriptNoShow">40%</strong>."</div>
            </div>
            <div class="talk-step">
                <span class="talk-step-num">4</span><strong>Close with Value</strong>
                <div class="script">"For <strong id="scriptInvest">$0</strong> in Year 1, you'll recover <strong id="scriptSave">$0</strong>. That's a <strong id="scriptRoi">0%</strong> ROI with <strong id="scriptPayback">0</strong>-month payback."</div>
            </div>
        </div>

        <!-- BOTTOM LINE -->
        <div class="bottom-line">
            <h3>üìä THE BOTTOM LINE</h3>
            <div class="bottom-grid">
                <div class="bottom-stat"><div class="bottom-label">Annual Loss (Status Quo)</div><div class="bottom-value red" id="blPain">$0</div></div>
                <div class="bottom-stat"><div class="bottom-label">Year 1 Investment</div><div class="bottom-value purple" id="blInvest">$0</div></div>
                <div class="bottom-stat"><div class="bottom-label">3-Year Net Benefit</div><div class="bottom-value green" id="blNet3">$0</div></div>
            </div>
        </div>
    </main>

    <script>
        const specialty = {
            plastic: {providers:2,staff:8,patients:20,revenue:350,charting:1,pas:15,denial:8,noShow:12,calls:50},
            allergy: {providers:2,staff:12,patients:30,revenue:180,charting:1.5,pas:25,denial:10,noShow:15,calls:80}
        };
        let current = 'plastic';

        function fmt(n){return Math.abs(n)>=1e6?'$'+(n/1e6).toFixed(1)+'M':'$'+Math.round(n).toLocaleString()}
        function getN(id,d=0){const e=document.getElementById(id);return e?(parseFloat(e.value)||d):d}
        function setN(id,v){const e=document.getElementById(id);if(e)e.value=v}

        function switchSpecialty(s){
            current=s;
            document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
            document.getElementById('tab-'+s).classList.add('active');
            const c=specialty[s];
            setN('providers',c.providers);
            setN('staff',c.staff);
            setN('patientsPerDay',c.patients);
            setN('revenuePerVisit',c.revenue);
            setN('chartingHours',c.charting);
            setN('pasPerWeek',c.pas);
            setN('denialRate',c.denial);
            setN('noShowRate',c.noShow);
            setN('callsPerDay',c.calls);
            calc();
        }

        function calc(){
            // Base metrics
            const mult = parseFloat(document.getElementById('currentEHR').value);
            const providers = getN('providers',2);
            const staff = getN('staff',8);
            const patientsPerDay = getN('patientsPerDay',20);
            const revenuePerVisit = getN('revenuePerVisit',350);
            const workDays = getN('workDays',20);
            const staffHr = getN('staffHourlyCost',25);
            const providerHr = 200; // Provider opportunity cost
            
            const annualDays = workDays * 12;
            const annualVisits = providers * patientsPerDay * annualDays;
            const annualRevenue = annualVisits * revenuePerVisit;
            const annualStaffHours = staff * workDays * 12 * 8;
            
            // Display base metrics
            document.getElementById('annualVisits').textContent = annualVisits.toLocaleString();
            document.getElementById('annualRevenue').textContent = fmt(annualRevenue);
            document.getElementById('ehrMultiplier').textContent = mult + 'x';
            document.getElementById('annualStaffHours').textContent = annualStaffHours.toLocaleString();

            // === CLINICAL ===
            const chartingHrs = getN('chartingHours',1);
            const chartingCost = chartingHrs * providerHr * annualDays * providers * mult;
            document.getElementById('chartingCost').textContent = fmt(chartingCost);
            document.getElementById('chartingCalc').textContent = `${chartingHrs}hr √ó $${providerHr}/hr √ó ${annualDays}days √ó ${providers}prov √ó ${mult}x = ${fmt(chartingCost)}`;

            const pasPerWeek = getN('pasPerWeek',15);
            const paMinutes = 45;
            const paCost = (paMinutes/60) * staffHr * pasPerWeek * 52 * mult;
            document.getElementById('paCost').textContent = fmt(paCost);
            document.getElementById('paCalc').textContent = `${pasPerWeek}/wk √ó ${paMinutes}min √ó $${staffHr}/hr √ó 52wks √ó ${mult}x = ${fmt(paCost)}`;

            const lookupMin = getN('lookupMin',8);
            const lookupCost = (lookupMin/60) * staffHr * annualVisits * mult;
            document.getElementById('lookupCost').textContent = fmt(lookupCost);
            document.getElementById('lookupCalc').textContent = `${lookupMin}min √ó ${annualVisits.toLocaleString()}visits √ó $${staffHr}/hr √ó ${mult}x = ${fmt(lookupCost)}`;

            const rxMin = getN('rxMin',45);
            const rxCost = (rxMin/60) * staffHr * annualDays * mult;
            document.getElementById('rxCost').textContent = fmt(rxCost);
            document.getElementById('rxCalc').textContent = `${rxMin}min/day √ó ${annualDays}days √ó $${staffHr}/hr √ó ${mult}x = ${fmt(rxCost)}`;

            const clinicalTotal = chartingCost + paCost + lookupCost + rxCost;
            document.getElementById('clinicalTotal').textContent = fmt(clinicalTotal);

            // === REVENUE CYCLE ===
            const denialRate = getN('denialRate',8)/100;
            const reworkCost = 35;
            const denialCost = annualVisits * denialRate * mult * reworkCost;
            document.getElementById('denialCost').textContent = fmt(denialCost);
            document.getElementById('denialCalc').textContent = `${annualVisits.toLocaleString()}visits √ó ${(denialRate*100).toFixed(0)}% √ó ${mult}x √ó $${reworkCost}/rework = ${fmt(denialCost)}`;

            const collectionRate = getN('collectionRate',92)/100;
            const collectionGap = Math.max(0, 0.95 - collectionRate);
            const collectionCost = annualRevenue * collectionGap;
            document.getElementById('collectionCost').textContent = fmt(collectionCost);
            document.getElementById('collectionCalc').textContent = `${fmt(annualRevenue)} √ó (95% - ${(collectionRate*100).toFixed(0)}%) = ${fmt(collectionCost)}`;

            const missedPct = getN('missedCharges',2)/100;
            const missedCost = annualRevenue * missedPct * mult;
            document.getElementById('missedCost').textContent = fmt(missedCost);
            document.getElementById('missedCalc').textContent = `${fmt(annualRevenue)} √ó ${(missedPct*100).toFixed(1)}% √ó ${mult}x = ${fmt(missedCost)}`;

            const billingHrs = getN('billingHrs',15);
            const billingStaff = Math.max(1, Math.ceil(staff * 0.15)); // ~15% of staff are billing
            const billingCost = billingHrs * staffHr * 52 * billingStaff * mult;
            document.getElementById('billingCost').textContent = fmt(billingCost);
            document.getElementById('billingCalc').textContent = `${billingHrs}hr/wk √ó $${staffHr}/hr √ó 52wks √ó ${billingStaff}staff √ó ${mult}x = ${fmt(billingCost)}`;

            const revenueTotal = denialCost + collectionCost + missedCost + billingCost;
            document.getElementById('revenueTotal').textContent = fmt(revenueTotal);

            // === PATIENT FLOW ===
            const noShowRate = getN('noShowRate',12)/100;
            const noShowCost = annualVisits * noShowRate * revenuePerVisit;
            document.getElementById('noShowCost').textContent = fmt(noShowCost);
            document.getElementById('noShowCalc').textContent = `${annualVisits.toLocaleString()}visits √ó ${(noShowRate*100).toFixed(0)}% √ó $${revenuePerVisit}/visit = ${fmt(noShowCost)}`;

            const callsPerDay = getN('callsPerDay',50);
            const callMin = 4;
            const phoneCost = (callMin/60) * staffHr * callsPerDay * annualDays * mult;
            document.getElementById('phoneCost').textContent = fmt(phoneCost);
            document.getElementById('phoneCalc').textContent = `${callsPerDay}calls √ó ${callMin}min √ó ${annualDays}days √ó $${staffHr}/hr √ó ${mult}x = ${fmt(phoneCost)}`;

            const checkinMin = getN('checkinMin',8);
            const checkinCost = (checkinMin/60) * staffHr * annualVisits * mult;
            document.getElementById('checkinCost').textContent = fmt(checkinCost);
            document.getElementById('checkinCalc').textContent = `${checkinMin}min √ó ${annualVisits.toLocaleString()}visits √ó $${staffHr}/hr √ó ${mult}x = ${fmt(checkinCost)}`;

            const verifyMin = getN('verifyMin',7);
            const verifyPct = 0.8;
            const verifyCost = (verifyMin/60) * staffHr * annualVisits * verifyPct * mult;
            document.getElementById('verifyCost').textContent = fmt(verifyCost);
            document.getElementById('verifyCalc').textContent = `${verifyMin}min √ó ${annualVisits.toLocaleString()}visits √ó 80% √ó $${staffHr}/hr √ó ${mult}x = ${fmt(verifyCost)}`;

            const patientTotal = noShowCost + phoneCost + checkinCost + verifyCost;
            document.getElementById('patientTotal').textContent = fmt(patientTotal);

            // === COMPLIANCE ===
            const mipsCurrent = parseFloat(document.getElementById('mipsCurrent').value)/100;
            const mipsTarget = 0.03; // Target +3%
            const mipsCost = annualRevenue * (mipsTarget - mipsCurrent);
            document.getElementById('mipsCost').textContent = fmt(Math.abs(mipsCost));
            document.getElementById('mipsCalc').textContent = `${fmt(annualRevenue)} √ó (3% - ${(mipsCurrent*100).toFixed(0)}%) = ${fmt(Math.abs(mipsCost))}`;

            const itMonthly = getN('itMonthly',500);
            const itCost = itMonthly * 12;
            document.getElementById('itCost').textContent = fmt(itCost);
            document.getElementById('itCalc').textContent = `$${itMonthly}/mo √ó 12 = ${fmt(itCost)}`;

            const newHires = getN('newHires',2);
            const trainingHrs = 30;
            const trainingCost = newHires * trainingHrs * staffHr * mult;
            document.getElementById('trainingCost').textContent = fmt(trainingCost);
            document.getElementById('trainingCalc').textContent = `${newHires}hires √ó ${trainingHrs}hrs √ó $${staffHr}/hr √ó ${mult}x = ${fmt(trainingCost)}`;

            const opsTotal = Math.abs(mipsCost) + itCost + trainingCost;
            document.getElementById('opsTotal').textContent = fmt(opsTotal);

            // === TOTAL PAIN ===
            const totalPain = clinicalTotal + revenueTotal + patientTotal + opsTotal;
            document.getElementById('totalPain').textContent = fmt(totalPain);
            document.getElementById('pain3yr').textContent = fmt(totalPain * 3);

            // === INVESTMENT ===
            const mmProvider = getN('mmProvider',700);
            const mmStaff = getN('mmStaff',100);
            const mmImpl = getN('mmImpl',10000);
            const mmSupport = getN('mmSupport',0);
            const mmMonthly = (providers * mmProvider) + (staff * mmStaff);
            const mmYear1 = (mmMonthly * 12) + mmImpl + mmSupport;
            const mmOngoing = mmMonthly * 12;
            document.getElementById('mmMonthly').textContent = fmt(mmMonthly);
            document.getElementById('mmYear1').textContent = fmt(mmYear1);
            document.getElementById('mmOngoing').textContent = fmt(mmOngoing);

            // === SAVINGS ===
            const impCharting = getN('impCharting',70)/100;
            const impDenial = getN('impDenial',50)/100;
            const impNoShow = getN('impNoShow',40)/100;
            const impAdmin = getN('impAdmin',50)/100;
            const impCharge = getN('impCharge',75)/100;
            const impPA = getN('impPA',60)/100;

            const saveClinical = (chartingCost * impCharting) + (paCost * impPA) + (lookupCost * impAdmin) + (rxCost * impAdmin);
            const saveRevenue = (denialCost * impDenial) + (collectionCost * 0.5) + (missedCost * impCharge) + (billingCost * impAdmin);
            const savePatient = (noShowCost * impNoShow) + (phoneCost * impAdmin) + (checkinCost * impAdmin) + (verifyCost * impAdmin);
            const saveOps = mipsCost + (itCost * 0.3) + (trainingCost * 0.5);
            const totalSavings = saveClinical + saveRevenue + savePatient + saveOps;

            document.getElementById('totalSavings').textContent = fmt(totalSavings);
            document.getElementById('savingsBreakdown').textContent = `Clinical ${fmt(saveClinical)} | Revenue ${fmt(saveRevenue)} | Flow ${fmt(savePatient)} | Ops ${fmt(saveOps)}`;

            // === ROI ===
            const netYear1 = totalSavings - mmYear1;
            const netYear3 = netYear1 + ((totalSavings - mmOngoing) * 2);
            const roi = mmYear1 > 0 ? (netYear1 / mmYear1) * 100 : 0;
            const paybackMonths = (totalSavings/12) > 0 ? Math.ceil(mmYear1 / (totalSavings/12)) : 99;

            document.getElementById('roi').textContent = Math.round(roi) + '%';
            document.getElementById('payback').textContent = paybackMonths > 24 ? '24+' : paybackMonths;

            // === TALK TRACK ===
            document.getElementById('scriptPain').textContent = fmt(totalPain);
            document.getElementById('scriptPain3').textContent = fmt(totalPain * 3);
            document.getElementById('scriptCharting').textContent = Math.round(impCharting * 100) + '%';
            document.getElementById('scriptDenial').textContent = Math.round(impDenial * 100) + '%';
            document.getElementById('scriptNoShow').textContent = Math.round(impNoShow * 100) + '%';
            document.getElementById('scriptInvest').textContent = fmt(mmYear1);
            document.getElementById('scriptSave').textContent = fmt(totalSavings);
            document.getElementById('scriptRoi').textContent = Math.round(roi) + '%';
            document.getElementById('scriptPayback').textContent = paybackMonths > 24 ? '24+' : paybackMonths;

            // === BOTTOM LINE ===
            document.getElementById('blPain').textContent = fmt(totalPain);
            document.getElementById('blInvest').textContent = fmt(mmYear1);
            document.getElementById('blNet3').textContent = fmt(netYear3);

            // Store for copy
            window.data = {name:document.getElementById('practiceName').value||'Practice',providers,staff,annualRevenue,totalPain,totalSavings,mmYear1,netYear1,netYear3,roi,paybackMonths};
        }

        function resetAll(){
            document.getElementById('practiceName').value='';
            document.getElementById('currentEHR').value='1.5';
            switchSpecialty(current);
        }

        function copySummary(){
            const d=window.data;
            const s=`ModMed ROI Analysis: ${d.name}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Providers: ${d.providers} | Staff: ${d.staff}
Annual Revenue: ${fmt(d.annualRevenue)}

COST OF DOING NOTHING: ${fmt(d.totalPain)}/year
3-Year Cost: ${fmt(d.totalPain*3)}

MODMED INVESTMENT: ${fmt(d.mmYear1)} (Year 1)
PROJECTED SAVINGS: ${fmt(d.totalSavings)}/year
NET YEAR 1: ${fmt(d.netYear1)}
NET 3-YEAR: ${fmt(d.netYear3)}
ROI: ${Math.round(d.roi)}% | Payback: ${d.paybackMonths>24?'24+':d.paybackMonths} months
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê`;
            navigator.clipboard.writeText(s).then(()=>{
                const btn=document.querySelector('.btn-primary');
                btn.textContent='‚úì Copied!';
                setTimeout(()=>btn.textContent='üìã Copy Summary',2000);
            });
        }

        switchSpecialty('plastic');
    </script>
</body>
</html>
