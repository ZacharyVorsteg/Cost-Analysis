<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ModMed Value Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root{--purple:#6B3FA0;--purple-light:#8B5FC0;--gold:#F5B335;--bg:#f8f9fc;--card:#fff;--text:#1a1a2e;--text2:#5a5a6e;--muted:#9a9aaa;--border:#e8e8ee;--red:#e53935;--green:#2e7d32;--blue:#1976d2}
        *{box-sizing:border-box;margin:0;padding:0}
        body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);line-height:1.5}
        
        /* Header */
        .header{background:linear-gradient(135deg,var(--purple),var(--purple-light));color:#fff;padding:16px 20px;position:sticky;top:0;z-index:100}
        .header-content{max-width:800px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}
        .logo{display:flex;align-items:center;gap:10px;font-weight:600;font-size:18px}
        .logo svg{width:36px;height:36px}
        .header-actions{display:flex;gap:8px}
        .btn{padding:10px 16px;border-radius:8px;font-size:13px;font-weight:600;border:none;cursor:pointer;transition:all .2s}
        .btn-gold{background:var(--gold);color:#000}
        .btn-white{background:rgba(255,255,255,.2);color:#fff}
        
        .main{max-width:800px;margin:0 auto;padding:20px}
        
        /* Step indicator */
        .steps{display:flex;justify-content:center;gap:8px;margin-bottom:24px}
        .step{width:12px;height:12px;border-radius:50%;background:var(--border);transition:all .3s}
        .step.active{background:var(--purple);width:32px;border-radius:6px}
        .step.done{background:var(--green)}
        
        /* Cards */
        .card{background:var(--card);border-radius:16px;padding:24px;margin-bottom:16px;box-shadow:0 2px 8px rgba(0,0,0,.04)}
        .card-title{font-size:14px;font-weight:600;color:var(--purple);margin-bottom:16px;display:flex;align-items:center;gap:8px}
        
        /* Quick Input Section */
        .quick-inputs{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
        .input-group{display:flex;flex-direction:column;gap:4px}
        .input-group label{font-size:12px;font-weight:500;color:var(--text2)}
        .input-group input,.input-group select{background:var(--bg);border:2px solid var(--border);border-radius:10px;padding:14px 16px;font-size:16px;font-weight:600;transition:border .2s}
        .input-group input:focus,.input-group select:focus{outline:none;border-color:var(--purple)}
        .input-hint{font-size:11px;color:var(--muted)}
        
        /* Comparison Table */
        .compare-table{width:100%;border-collapse:collapse}
        .compare-table th{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;padding:12px 8px;text-align:center}
        .compare-table th:first-child{text-align:left}
        .compare-table th.current{color:var(--red);background:rgba(229,57,53,.08);border-radius:8px 0 0 0}
        .compare-table th.modmed{color:var(--green);background:rgba(46,125,50,.08);border-radius:0 8px 0 0}
        .compare-table th.impact{color:var(--blue)}
        .compare-table td{padding:14px 8px;border-bottom:1px solid var(--border);text-align:center;font-size:14px}
        .compare-table td:first-child{text-align:left;font-weight:500}
        .compare-table td.current{background:rgba(229,57,53,.04);color:var(--red);font-weight:600}
        .compare-table td.modmed{background:rgba(46,125,50,.04);color:var(--green);font-weight:600}
        .compare-table td.impact{color:var(--blue);font-weight:600}
        .compare-table tr:last-child td{border-bottom:none;padding-top:16px;font-size:16px}
        .row-label small{display:block;font-size:11px;color:var(--muted);font-weight:400}
        
        /* Big Numbers */
        .big-numbers{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:20px}
        .big-number{text-align:center;padding:20px 12px;border-radius:12px}
        .big-number.pain{background:linear-gradient(135deg,#ffebee,#ffcdd2)}
        .big-number.save{background:linear-gradient(135deg,#e8f5e9,#c8e6c9)}
        .big-number.roi{background:linear-gradient(135deg,#e3f2fd,#bbdefb)}
        .big-number-label{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;margin-bottom:4px}
        .big-number.pain .big-number-label{color:var(--red)}
        .big-number.save .big-number-label{color:var(--green)}
        .big-number.roi .big-number-label{color:var(--blue)}
        .big-number-value{font-size:28px;font-weight:700}
        .big-number.pain .big-number-value{color:var(--red)}
        .big-number.save .big-number-value{color:var(--green)}
        .big-number.roi .big-number-value{color:var(--blue)}
        .big-number-sub{font-size:11px;color:var(--muted);margin-top:4px}
        
        /* Talk Track */
        .talk-section{background:var(--gold);border-radius:16px;padding:20px;margin-top:16px}
        .talk-title{font-size:14px;font-weight:700;margin-bottom:16px;display:flex;align-items:center;gap:8px}
        .talk-card{background:#fff;border-radius:12px;padding:16px;margin-bottom:12px}
        .talk-card:last-child{margin-bottom:0}
        .talk-step{display:inline-flex;width:24px;height:24px;align-items:center;justify-content:center;background:var(--purple);color:#fff;border-radius:50%;font-size:12px;font-weight:700;margin-right:10px}
        .talk-label{font-size:13px;font-weight:600;margin-bottom:8px}
        .talk-script{font-size:14px;color:var(--text2);line-height:1.6;padding:12px;background:var(--bg);border-radius:8px;border-left:4px solid var(--purple)}
        .talk-script strong{color:var(--purple)}
        .talk-question{font-size:12px;color:var(--muted);font-style:italic;margin-top:8px}
        
        /* Expand/Details */
        .details-toggle{display:flex;align-items:center;justify-content:center;gap:6px;padding:12px;margin-top:16px;font-size:13px;font-weight:500;color:var(--purple);cursor:pointer;border:2px dashed var(--border);border-radius:12px;transition:all .2s}
        .details-toggle:hover{background:rgba(107,63,160,.05);border-color:var(--purple)}
        .details-content{display:none;margin-top:16px}
        .details-content.show{display:block}
        
        /* Assumptions Grid */
        .assumptions-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
        .assumption{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:var(--bg);border-radius:8px;font-size:12px}
        .assumption input{width:50px;text-align:right;background:#fff;border:1px solid var(--border);border-radius:4px;padding:4px 6px;font-size:12px}
        
        /* Print View */
        .print-section{background:var(--card);border:2px solid var(--green);border-radius:16px;padding:24px;margin-top:16px;text-align:center}
        .print-title{font-size:18px;font-weight:700;color:var(--green);margin-bottom:8px}
        .print-subtitle{font-size:14px;color:var(--text2);margin-bottom:20px}
        .print-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;text-align:center}
        .print-stat-label{font-size:11px;color:var(--muted);margin-bottom:4px}
        .print-stat-value{font-size:24px;font-weight:700}
        .print-stat-value.red{color:var(--red)}
        .print-stat-value.purple{color:var(--purple)}
        .print-stat-value.green{color:var(--green)}
        
        /* Specialty tabs */
        .specialty-tabs{display:flex;gap:8px;margin-bottom:20px}
        .specialty-tab{flex:1;padding:12px;text-align:center;background:var(--bg);border:2px solid var(--border);border-radius:10px;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s}
        .specialty-tab.active{background:var(--purple);color:#fff;border-color:var(--purple)}
        
        @media(max-width:600px){
            .quick-inputs{grid-template-columns:1fr}
            .big-numbers{grid-template-columns:1fr}
            .assumptions-grid{grid-template-columns:1fr}
            .print-grid{grid-template-columns:1fr}
            .compare-table{font-size:12px}
            .compare-table td,.compare-table th{padding:10px 6px}
        }
        
        @media print{
            .header,.details-toggle,.details-content,.header-actions{display:none!important}
            .card{box-shadow:none;border:1px solid #ddd}
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="48" fill="#8C8C8C"/><circle cx="50" cy="50" r="44" fill="#F5B335"/><ellipse cx="50" cy="75" rx="44" ry="25" fill="#6B3FA0"/><path d="M15 50 L30 50 L38 25 L50 70 L62 30 L70 50 L85 50" stroke="#fff" stroke-width="6" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
                Value Calculator
            </div>
            <div class="header-actions">
                <button class="btn btn-white" onclick="resetAll()">Reset</button>
                <button class="btn btn-gold" onclick="copySummary()">ðŸ“‹ Copy</button>
            </div>
        </div>
    </header>

    <main class="main">
        <!-- STEP 1: Quick Setup -->
        <div class="card">
            <div class="card-title">âš¡ Quick Setup</div>
            <div class="specialty-tabs">
                <div class="specialty-tab active" onclick="setSpecialty('plastic')" id="tab-plastic">Plastic Surgery</div>
                <div class="specialty-tab" onclick="setSpecialty('allergy')" id="tab-allergy">Allergy</div>
            </div>
            <div class="quick-inputs">
                <div class="input-group">
                    <label>Providers</label>
                    <input type="number" id="providers" value="2" min="1" oninput="calc()">
                    <span class="input-hint">Physicians, PAs, NPs</span>
                </div>
                <div class="input-group">
                    <label>Support Staff</label>
                    <input type="number" id="staff" value="8" min="0" oninput="calc()">
                    <span class="input-hint">MAs, front desk, billing</span>
                </div>
                <div class="input-group">
                    <label>Patients/Provider/Day</label>
                    <input type="number" id="patients" value="20" min="1" oninput="calc()">
                </div>
                <div class="input-group">
                    <label>Avg Revenue/Visit</label>
                    <input type="number" id="revenue" value="350" min="0" oninput="calc()">
                    <span class="input-hint">Include procedures</span>
                </div>
                <div class="input-group">
                    <label>Current EHR</label>
                    <select id="ehr" onchange="calc()">
                        <option value="1.5">Paper/Manual</option>
                        <option value="1.3">Legacy EHR</option>
                        <option value="1.15">Generic EHR</option>
                        <option value="1.0">Another Specialty EHR</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Practice Name</label>
                    <input type="text" id="name" placeholder="Optional" oninput="calc()">
                </div>
            </div>
        </div>

        <!-- COMPARISON TABLE -->
        <div class="card">
            <div class="card-title">ðŸ“Š Side-by-Side Comparison</div>
            <table class="compare-table">
                <thead>
                    <tr>
                        <th style="width:35%">Pain Point</th>
                        <th class="current" style="width:22%">Current</th>
                        <th class="modmed" style="width:22%">With ModMed</th>
                        <th class="impact" style="width:21%">Annual Savings</th>
                    </tr>
                </thead>
                <tbody id="compareBody">
                    <!-- Filled by JS -->
                </tbody>
            </table>
            
            <div class="big-numbers">
                <div class="big-number pain">
                    <div class="big-number-label">ðŸ’” Cost of Inaction</div>
                    <div class="big-number-value" id="totalPain">$0</div>
                    <div class="big-number-sub">Lost annually</div>
                </div>
                <div class="big-number save">
                    <div class="big-number-label">âœ¨ Annual Savings</div>
                    <div class="big-number-value" id="totalSave">$0</div>
                    <div class="big-number-sub">With ModMed</div>
                </div>
                <div class="big-number roi">
                    <div class="big-number-label">ðŸ“ˆ Year 1 ROI</div>
                    <div class="big-number-value" id="roi">0%</div>
                    <div class="big-number-sub" id="payback">Payback: -- mo</div>
                </div>
            </div>
        </div>

        <!-- TALK TRACK -->
        <div class="talk-section">
            <div class="talk-title">ðŸŽ¯ Your Talk Track</div>
            
            <div class="talk-card">
                <div class="talk-label"><span class="talk-step">1</span>Start with Discovery</div>
                <div class="talk-script">"Tell me about your <strong>biggest frustrations</strong> with your current workflow. Where do you feel like you're <strong>losing time or money</strong>?"</div>
                <div class="talk-question">Listen for: charting, denials, no-shows, collections, compliance</div>
            </div>
            
            <div class="talk-card">
                <div class="talk-label"><span class="talk-step">2</span>Quantify Their Pain</div>
                <div class="talk-script">"Based on what you've shared, you're losing approximately <strong id="scriptPain">$0</strong> every year. Over 3 years, that's <strong id="scriptPain3">$0</strong> walking out the door."</div>
            </div>
            
            <div class="talk-card">
                <div class="talk-label"><span class="talk-step">3</span>Present the Opportunity</div>
                <div class="talk-script">"With ModMed, practices like yours typically see:
                    <br>â€¢ <strong id="scriptCharting">70%</strong> reduction in after-hours charting
                    <br>â€¢ <strong id="scriptDenial">50%</strong> fewer claim denials
                    <br>â€¢ <strong id="scriptNoShow">40%</strong> reduction in no-shows
                    <br>That translates to <strong id="scriptSave">$0</strong> back in your pocket annually."</div>
            </div>
            
            <div class="talk-card">
                <div class="talk-label"><span class="talk-step">4</span>Close with Value</div>
                <div class="talk-script">"For an investment of <strong id="scriptInvest">$0</strong> in Year 1, you'll recover <strong id="scriptSave2">$0</strong>. That's a <strong id="scriptRoi">0%</strong> return with a <strong id="scriptPayback">--</strong> month payback. Over 3 years, that's <strong id="scriptNet3">$0</strong> in net benefit."</div>
            </div>
        </div>

        <!-- BOTTOM LINE FOR PRINTING -->
        <div class="print-section">
            <div class="print-title">ðŸ“Š THE BOTTOM LINE</div>
            <div class="print-subtitle" id="practiceSummary">Practice Analysis</div>
            <div class="print-grid">
                <div>
                    <div class="print-stat-label">Annual Loss (Status Quo)</div>
                    <div class="print-stat-value red" id="blPain">$0</div>
                </div>
                <div>
                    <div class="print-stat-label">Year 1 Investment</div>
                    <div class="print-stat-value purple" id="blInvest">$0</div>
                </div>
                <div>
                    <div class="print-stat-label">3-Year Net Benefit</div>
                    <div class="print-stat-value green" id="blNet3">$0</div>
                </div>
            </div>
        </div>

        <!-- DETAILS (Expandable) -->
        <div class="details-toggle" onclick="toggleDetails()">
            <span id="detailsIcon">â–¼</span> Adjust Assumptions & See Full Breakdown
        </div>
        <div class="details-content" id="detailsContent">
            <div class="card">
                <div class="card-title">ðŸ”§ Adjust Assumptions</div>
                <p style="font-size:12px;color:var(--muted);margin-bottom:16px">Modify these if you learned specific details during discovery</p>
                
                <h4 style="font-size:12px;font-weight:600;color:var(--text2);margin:16px 0 8px">Current State (What They're Experiencing)</h4>
                <div class="assumptions-grid">
                    <div class="assumption"><span>After-hours charting (hrs/day)</span><input type="number" id="aCharting" value="1" step="0.5" oninput="calc()"></div>
                    <div class="assumption"><span>Claim denial rate (%)</span><input type="number" id="aDenial" value="8" oninput="calc()"></div>
                    <div class="assumption"><span>No-show rate (%)</span><input type="number" id="aNoShow" value="12" oninput="calc()"></div>
                    <div class="assumption"><span>Collection rate (%)</span><input type="number" id="aCollection" value="92" oninput="calc()"></div>
                    <div class="assumption"><span>Prior auths per week</span><input type="number" id="aPA" value="15" oninput="calc()"></div>
                    <div class="assumption"><span>Missed charge rate (%)</span><input type="number" id="aMissed" value="2" oninput="calc()"></div>
                </div>
                
                <h4 style="font-size:12px;font-weight:600;color:var(--text2);margin:16px 0 8px">ModMed Improvements (Conservative Estimates)</h4>
                <div class="assumptions-grid">
                    <div class="assumption"><span>Charting reduction (%)</span><input type="number" id="iCharting" value="70" oninput="calc()"></div>
                    <div class="assumption"><span>Denial reduction (%)</span><input type="number" id="iDenial" value="50" oninput="calc()"></div>
                    <div class="assumption"><span>No-show reduction (%)</span><input type="number" id="iNoShow" value="40" oninput="calc()"></div>
                    <div class="assumption"><span>Admin time savings (%)</span><input type="number" id="iAdmin" value="50" oninput="calc()"></div>
                </div>
                
                <h4 style="font-size:12px;font-weight:600;color:var(--text2);margin:16px 0 8px">ModMed Investment</h4>
                <div class="assumptions-grid">
                    <div class="assumption"><span>Per provider/month ($)</span><input type="number" id="mProvider" value="700" oninput="calc()"></div>
                    <div class="assumption"><span>Per staff user/month ($)</span><input type="number" id="mStaff" value="100" oninput="calc()"></div>
                    <div class="assumption"><span>Implementation ($)</span><input type="number" id="mImpl" value="10000" oninput="calc()"></div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">ðŸ“‹ Full Cost Breakdown</div>
                <div id="fullBreakdown"></div>
            </div>
        </div>
    </main>

    <script>
        const specialties = {
            plastic: {providers:2,staff:8,patients:20,revenue:350,charting:1,denial:8,noShow:12,pa:15},
            allergy: {providers:2,staff:12,patients:30,revenue:180,charting:1.5,denial:10,noShow:15,pa:25}
        };
        
        function fmt(n){return n>=1e6?'$'+(n/1e6).toFixed(1)+'M':n>=1e3?'$'+Math.round(n/1e3)+'K':'$'+Math.round(n)}
        function getN(id,d=0){return parseFloat(document.getElementById(id)?.value)||d}
        function setN(id,v){const e=document.getElementById(id);if(e)e.value=v}
        
        function setSpecialty(s){
            document.querySelectorAll('.specialty-tab').forEach(t=>t.classList.remove('active'));
            document.getElementById('tab-'+s).classList.add('active');
            const c=specialties[s];
            setN('providers',c.providers);setN('staff',c.staff);setN('patients',c.patients);setN('revenue',c.revenue);
            setN('aCharting',c.charting);setN('aDenial',c.denial);setN('aNoShow',c.noShow);setN('aPA',c.pa);
            calc();
        }
        
        function toggleDetails(){
            const c=document.getElementById('detailsContent');
            const i=document.getElementById('detailsIcon');
            c.classList.toggle('show');
            i.textContent=c.classList.contains('show')?'â–²':'â–¼';
        }
        
        function calc(){
            // Inputs
            const mult = parseFloat(document.getElementById('ehr').value);
            const providers = getN('providers',2);
            const staff = getN('staff',8);
            const patients = getN('patients',20);
            const revenuePerVisit = getN('revenue',350);
            const annualDays = 240;
            const annualVisits = providers * patients * annualDays;
            const annualRevenue = annualVisits * revenuePerVisit;
            const staffHr = 25;
            const providerHr = 200;
            
            // Current state assumptions
            const charting = getN('aCharting',1);
            const denial = getN('aDenial',8)/100;
            const noShow = getN('aNoShow',12)/100;
            const collection = getN('aCollection',92)/100;
            const pa = getN('aPA',15);
            const missed = getN('aMissed',2)/100;
            
            // Improvement %
            const iCharting = getN('iCharting',70)/100;
            const iDenial = getN('iDenial',50)/100;
            const iNoShow = getN('iNoShow',40)/100;
            const iAdmin = getN('iAdmin',50)/100;
            
            // Calculate each pain point
            const painCharting = charting * providerHr * annualDays * providers * mult;
            const painDenial = annualVisits * denial * mult * 35;
            const painNoShow = annualVisits * noShow * revenuePerVisit;
            const painCollection = annualRevenue * Math.max(0, 0.95 - collection);
            const painPA = (45/60) * staffHr * pa * 52 * mult;
            const painMissed = annualRevenue * missed * mult;
            const painAdmin = (8/60) * staffHr * annualVisits * mult; // Check-in/out time
            
            const totalPain = painCharting + painDenial + painNoShow + painCollection + painPA + painMissed + painAdmin;
            
            // Savings
            const saveCharting = painCharting * iCharting;
            const saveDenial = painDenial * iDenial;
            const saveNoShow = painNoShow * iNoShow;
            const saveCollection = painCollection * 0.5;
            const savePA = painPA * 0.6;
            const saveMissed = painMissed * 0.75;
            const saveAdmin = painAdmin * iAdmin;
            
            const totalSave = saveCharting + saveDenial + saveNoShow + saveCollection + savePA + saveMissed + saveAdmin;
            
            // Investment
            const mProvider = getN('mProvider',700);
            const mStaff = getN('mStaff',100);
            const mImpl = getN('mImpl',10000);
            const monthly = (providers * mProvider) + (staff * mStaff);
            const year1 = (monthly * 12) + mImpl;
            const ongoing = monthly * 12;
            
            const netYear1 = totalSave - year1;
            const netYear3 = netYear1 + ((totalSave - ongoing) * 2);
            const roi = year1 > 0 ? Math.round((netYear1 / year1) * 100) : 0;
            const payback = (totalSave/12) > 0 ? Math.ceil(year1 / (totalSave/12)) : 99;
            
            // Update comparison table
            const rows = [
                {name:'After-Hours Charting',sub:'Provider time lost',current:charting*mult+' hrs/day',modmed:(charting*(1-iCharting)).toFixed(1)+' hrs/day',save:saveCharting},
                {name:'Claim Denials',sub:'Rework & lost revenue',current:Math.round(denial*mult*100)+'%',modmed:Math.round(denial*mult*100*(1-iDenial))+'%',save:saveDenial},
                {name:'No-Shows',sub:'Empty appointment slots',current:Math.round(noShow*100)+'%',modmed:Math.round(noShow*100*(1-iNoShow))+'%',save:saveNoShow},
                {name:'Collection Rate',sub:'Revenue captured',current:Math.round(collection*100)+'%',modmed:'95%+',save:saveCollection},
                {name:'Prior Authorizations',sub:'Staff time on PAs',current:pa+'/week',modmed:Math.round(pa*0.4)+'/week',save:savePA},
                {name:'Missed Charges',sub:'Unbilled services',current:(missed*100).toFixed(1)+'%',modmed:(missed*100*0.25).toFixed(1)+'%',save:saveMissed},
                {name:'Check-in/Admin',sub:'Manual workflows',current:'Manual',modmed:'Automated',save:saveAdmin},
            ];
            
            let tableHTML = '';
            rows.forEach(r=>{
                tableHTML += `<tr>
                    <td class="row-label">${r.name}<small>${r.sub}</small></td>
                    <td class="current">${r.current}</td>
                    <td class="modmed">${r.modmed}</td>
                    <td class="impact">${fmt(r.save)}</td>
                </tr>`;
            });
            tableHTML += `<tr style="font-weight:700;border-top:2px solid var(--border)">
                <td>TOTAL</td>
                <td class="current">${fmt(totalPain)}/yr</td>
                <td class="modmed">Improved</td>
                <td class="impact">${fmt(totalSave)}/yr</td>
            </tr>`;
            document.getElementById('compareBody').innerHTML = tableHTML;
            
            // Update big numbers
            document.getElementById('totalPain').textContent = fmt(totalPain);
            document.getElementById('totalSave').textContent = fmt(totalSave);
            document.getElementById('roi').textContent = roi + '%';
            document.getElementById('payback').textContent = 'Payback: ' + (payback > 24 ? '24+' : payback) + ' mo';
            
            // Update talk track
            document.getElementById('scriptPain').textContent = fmt(totalPain);
            document.getElementById('scriptPain3').textContent = fmt(totalPain * 3);
            document.getElementById('scriptCharting').textContent = Math.round(iCharting * 100) + '%';
            document.getElementById('scriptDenial').textContent = Math.round(iDenial * 100) + '%';
            document.getElementById('scriptNoShow').textContent = Math.round(iNoShow * 100) + '%';
            document.getElementById('scriptSave').textContent = fmt(totalSave);
            document.getElementById('scriptSave2').textContent = fmt(totalSave);
            document.getElementById('scriptInvest').textContent = fmt(year1);
            document.getElementById('scriptRoi').textContent = roi + '%';
            document.getElementById('scriptPayback').textContent = payback > 24 ? '24+' : payback;
            document.getElementById('scriptNet3').textContent = fmt(netYear3);
            
            // Update bottom line
            const name = document.getElementById('name').value || 'Practice';
            document.getElementById('practiceSummary').textContent = name + ' â€¢ ' + providers + ' Providers â€¢ ' + staff + ' Staff';
            document.getElementById('blPain').textContent = fmt(totalPain);
            document.getElementById('blInvest').textContent = fmt(year1);
            document.getElementById('blNet3').textContent = fmt(netYear3);
            
            // Full breakdown
            document.getElementById('fullBreakdown').innerHTML = `
                <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;font-size:12px">
                    <div style="padding:12px;background:var(--bg);border-radius:8px">
                        <strong>Clinical Costs</strong><br>
                        Charting: ${fmt(painCharting)}<br>
                        Prior Auth: ${fmt(painPA)}<br>
                        <em>Total: ${fmt(painCharting+painPA)}</em>
                    </div>
                    <div style="padding:12px;background:var(--bg);border-radius:8px">
                        <strong>Revenue Cycle</strong><br>
                        Denials: ${fmt(painDenial)}<br>
                        Collections: ${fmt(painCollection)}<br>
                        Missed: ${fmt(painMissed)}<br>
                        <em>Total: ${fmt(painDenial+painCollection+painMissed)}</em>
                    </div>
                    <div style="padding:12px;background:var(--bg);border-radius:8px">
                        <strong>Patient Flow</strong><br>
                        No-Shows: ${fmt(painNoShow)}<br>
                        Admin: ${fmt(painAdmin)}<br>
                        <em>Total: ${fmt(painNoShow+painAdmin)}</em>
                    </div>
                    <div style="padding:12px;background:var(--bg);border-radius:8px">
                        <strong>ModMed Investment</strong><br>
                        Monthly: ${fmt(monthly)}<br>
                        Year 1: ${fmt(year1)}<br>
                        Ongoing: ${fmt(ongoing)}/yr
                    </div>
                </div>
            `;
            
            // Store for copy
            window.data = {name,providers,staff,totalPain,totalSave,year1,netYear1,netYear3,roi,payback};
        }
        
        function resetAll(){
            setSpecialty('plastic');
            document.getElementById('name').value = '';
        }
        
        function copySummary(){
            const d = window.data;
            const txt = `ModMed Value Analysis: ${d.name}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${d.providers} Providers | ${d.staff} Staff

ðŸ’” ANNUAL COST OF INACTION: ${fmt(d.totalPain)}
   (3-Year: ${fmt(d.totalPain*3)})

âœ¨ PROJECTED ANNUAL SAVINGS: ${fmt(d.totalSave)}

ðŸ’¼ YEAR 1 INVESTMENT: ${fmt(d.year1)}
ðŸ“ˆ YEAR 1 ROI: ${d.roi}%
â±ï¸ PAYBACK: ${d.payback > 24 ? '24+' : d.payback} months
ðŸ’° 3-YEAR NET BENEFIT: ${fmt(d.netYear3)}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”`;
            
            navigator.clipboard.writeText(txt).then(()=>{
                const btn = document.querySelector('.btn-gold');
                const orig = btn.innerHTML;
                btn.innerHTML = 'âœ“ Copied!';
                setTimeout(()=>btn.innerHTML=orig, 2000);
            });
        }
        
        // Initialize
        calc();
    </script>
</body>
</html>
